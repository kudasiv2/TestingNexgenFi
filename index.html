<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexGenFi - Smart Investment Platform</title>
    <meta name="description" content="Earn daily returns with 4% capital return, multi-level referral bonuses, and leadership rewards system">
    <link rel="icon" type="image/x-icon" href="image/favicon.ico">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bignumber.js@9.1.2/bignumber.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>

    <style>
        :root {
            /* Premium Green Palette: Deep Navy & Emerald */
            --bg-deep: #050b14;
            --bg-card: rgba(14, 29, 47, 0.85);
            --bg-card-hover: rgba(19, 38, 60, 0.95);
            
            --primary-accent: #00C853;
            --secondary-accent: #00E676;
            --cyan-glow: #00BFA5;
            
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --text-dark: #0f172a;

            --gradient-main: linear-gradient(135deg, #00C853 0%, #00E676 100%);
            --gradient-gold: linear-gradient(135deg, #00E676 0%, #00C853 100%);
            --gradient-dark: linear-gradient(180deg, #0A1929 0%, #0C253C 100%);
            
            --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            --glass-shine: 1px solid rgba(255, 255, 255, 0.15);
            
            --shadow-glow: 0 0 20px rgba(0, 200, 83, 0.2);
            --shadow-card: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
            --shadow-elevated: 0 20px 60px rgba(0, 0, 0, 0.6);

            /* Typography */
            --font-body: 'Outfit', sans-serif;
            --font-heading: 'Space Grotesk', sans-serif;

            /* Spacing & Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            
            --container-width: 1240px;
            --header-height: 80px;
        }

        /* Modern Reset & Base */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            outline: none; 
            -webkit-tap-highlight-color: transparent; 
        }

        html { 
            scroll-behavior: smooth; 
            font-size: 16px; 
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(0, 200, 83, 0.08), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(0, 230, 118, 0.05), transparent 25%);
            background-attachment: fixed;
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: #1E3A5F; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-accent); }

        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Typography Utilities */
        h1, h2, h3, h4 { 
            font-family: var(--font-heading); 
            color: var(--text-main); 
            line-height: 1.2; 
        }

        .gradient-text {
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }

        /* Preloader */
        .preloader {
            position: fixed; 
            inset: 0;
            background: #0A1929;
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            z-index: 9999;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }
        .preloader.fade-out { 
            opacity: 0; 
            visibility: hidden; 
        }

        .loader { 
            display: flex; 
            gap: 6px; 
            margin-bottom: 20px; 
        }
        .green-bar {
            width: 6px; 
            height: 30px;
            background: var(--gradient-main);
            border-radius: 10px;
            animation: pulse-loader 1s ease-in-out infinite;
        }
        .green-bar:nth-child(2) { animation-delay: 0.1s; height: 45px; }
        .green-bar:nth-child(3) { animation-delay: 0.2s; height: 60px; }
        .green-bar:nth-child(4) { animation-delay: 0.3s; height: 45px; }
        .green-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes pulse-loader {
            0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
            50% { transform: scaleY(1); opacity: 1; box-shadow: 0 0 15px var(--primary-accent); }
        }

        .preloader-text { 
            font-family: var(--font-heading); 
            font-size: 1.5rem; 
            letter-spacing: 4px; 
            font-weight: 700; 
            color: white; 
        }

        /* Header / Navbar */
        .header {
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0;
            height: var(--header-height);
            background: rgba(5, 11, 20, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: var(--glass-border);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            height: 100%; 
        }

        .nav__logo { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            text-decoration: none; 
        }
        .logo { 
            width: 36px; 
            height: 36px; 
            filter: drop-shadow(0 0 8px rgba(0, 200, 83, 0.5)); 
            transition: transform 0.3s ease; 
        }
        .nav__logo:hover .logo { 
            transform: rotate(10deg); 
        }
        .logo__text { 
            font-size: 1.3rem; 
            font-weight: 700; 
            letter-spacing: 1px; 
            color: white; 
            font-family: var(--font-heading); 
        }

        .nav__menu { 
            display: flex; 
            align-items: center; 
            gap: 40px; 
        }
        .nav__list { 
            display: flex; 
            list-style: none; 
            gap: 32px; 
        }

        .nav__link {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: 0.3s;
            position: relative;
            cursor: pointer;
        }
        .nav__link:hover, 
        .nav__link.active { 
            color: white; 
            text-shadow: 0 0 10px rgba(0, 200, 83, 0.6); 
        }
        .nav__link::after {
            content: ''; 
            position: absolute; 
            bottom: -6px; 
            left: 50%; 
            transform: translateX(-50%) scaleX(0);
            width: 20px; 
            height: 2px; 
            background: var(--primary-accent);
            transition: 0.3s; 
            border-radius: 2px;
        }
        .nav__link:hover::after, 
        .nav__link.active::after { 
            transform: translateX(-50%) scaleX(1); 
            width: 100%; 
        }

        .nav__toggle { 
            display: none; 
            font-size: 1.5rem; 
            color: white; 
            cursor: pointer; 
            padding: 10px;
        }

        /* Buttons */
        .btn {
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 600; 
            font-size: 0.95rem; 
            font-family: var(--font-body);
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none; 
            position: relative; 
            overflow: hidden; 
            border: none;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .btn--primary {
            background: var(--gradient-main);
            color: white;
            box-shadow: 0 4px 20px rgba(0, 200, 83, 0.3);
        }
        .btn--primary::before {
            content: ''; 
            position: absolute; 
            top: 0; 
            left: -100%; 
            width: 100%; 
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        .btn--primary:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(0, 230, 118, 0.4); 
        }
        .btn--primary:hover::before { 
            left: 100%; 
        }

        .btn--outline {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(0, 200, 83, 0.4);
            color: white;
            backdrop-filter: blur(5px);
        }
        .btn--outline:hover {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--primary-accent);
            transform: translateY(-2px);
        }

        .btn-sm { padding: 8px 20px; font-size: 0.85rem; }
        .btn-lg { padding: 16px 36px; font-size: 1rem; }

        /* Compact Buttons for Mobile */
        .compact-btn {
            padding: 10px 20px;
            font-size: 0.9rem;
            height: 44px;
            min-width: 120px;
        }

        /* Timer Section - FIXED for Mobile */
        .timer-section {
            display: none;
            margin-bottom: 30px;
            width: 100%;
        }

        .timer-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .timer-box {
            background: rgba(0, 200, 83, 0.08);
            border: 1px solid rgba(0, 200, 83, 0.2);
            border-radius: var(--radius-lg);
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            width: 100%;
            min-width: 0; /* Prevent overflow */
            overflow: hidden;
        }

        .timer-label {
            color: var(--text-muted);
            font-size: 0.8rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .timer-value {
            color: #A7FFEB;
            font-family: var(--font-heading);
            font-size: 1.1rem;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 200, 83, 0.3);
            word-break: break-word;
            overflow-wrap: break-word;
        }

        /* Sections General */
        .section { 
            padding-top: 130px; 
            padding-bottom: 80px; 
            min-height: 100vh;
            display: flex; 
            flex-direction: column;
            justify-content: flex-start;
        }
        .section__header { 
            text-align: center; 
            margin-bottom: 60px; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
        }
        .section__title {
            font-size: 3rem; 
            margin-bottom: 16px; 
            font-weight: 700;
            background: linear-gradient(to right, #fff, #b8b8b8);
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
        }
        .section__subtitle { 
            color: var(--text-muted); 
            font-size: 1.125rem; 
        }

        /* Dashboard Sections */
        .dashboard-section {
            margin-bottom: 40px;
            width: 100%;
        }

        .dashboard-subtitle {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            position: relative;
            padding-bottom: 10px;
        }

        .dashboard-subtitle::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: var(--gradient-main);
            border-radius: 2px;
        }

        /* Compact Stats for Mobile & Desktop */
        .compact-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
            width: 100%;
        }

        .compact-card {
            padding: 20px !important;
            flex-direction: column;
            text-align: center;
            gap: 12px;
            min-height: auto;
            height: 100%;
            width: 100%;
            position: relative;
            /* REMOVED: Removed the green top border */
        }

        .compact-card .stat-icon {
            width: 46px;
            height: 46px;
            font-size: 1.4rem;
            margin: 0 auto;
            background: rgba(0, 200, 83, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary-accent);
        }

        .compact-card .stat-value {
            font-size: 1.3rem;
            font-weight: 600;
            line-height: 1.2;
            color: white;
            word-break: break-word;
        }

        .compact-card .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.2;
        }

        /* Compact Action Buttons */
        .compact-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
            width: 100%;
        }

        .compact-buttons .compact-btn {
            flex: 1;
            min-width: 140px;
            max-width: 240px;
        }

        /* Premium Cards - REMOVED green top border */
        .premium-card {
            background: linear-gradient(145deg, rgba(14, 29, 47, 0.9), rgba(10, 25, 41, 0.95));
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: var(--glass-border);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-card);
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            width: 100%;
        }

        /* REMOVED: .premium-card::before (green top border) */

        .premium-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(0, 200, 83, 0.03), transparent 30%);
            pointer-events: none;
        }

        /* Premium Table Containers */
        .premium-table-container {
            background: rgba(255, 255, 255, 0.015);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto; 
            width: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .table-responsive {
            width: 100%;
            overflow-x: auto; 
            -webkit-overflow-scrolling: touch;
        }

        .premium-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .premium-table th {
            background: rgba(0, 200, 83, 0.1);
            color: white;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid rgba(0, 200, 83, 0.3);
            white-space: nowrap;
        }

        .premium-table td {
            padding: 16px 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-muted);
            font-size: 0.95rem;
            vertical-align: middle;
            word-break: break-word;
        }

        .premium-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .premium-table tr:last-child td {
            border-bottom: none;
        }

        /* Team Data Table Specific */
        .team-table td {
            font-size: 0.9rem;
            padding: 12px 8px;
        }

        .team-table th {
            padding: 12px 8px;
            font-size: 0.8rem;
        }

        /* Hero Section */
        #home { 
            padding-top: 150px; 
            justify-content: center;
            min-height: 100vh;
        }
        .hero__container { 
            display: grid; 
            grid-template-columns: 1.2fr 0.8fr; 
            gap: 60px; 
            align-items: center; 
        }

        .badge {
            background: rgba(0, 200, 83, 0.15); 
            border: 1px solid rgba(0, 200, 83, 0.4);
            color: #A7FFEB; 
            padding: 8px 20px; 
            border-radius: 20px;
            font-size: 0.875rem; 
            font-weight: 600; 
            letter-spacing: 0.5px; 
            margin-bottom: 24px; 
            display: inline-block;
        }

        .hero__title { 
            font-size: 3.5rem; 
            line-height: 1.1; 
            margin-bottom: 24px; 
            font-weight: 800; 
        }
        .hero__description { 
            color: var(--text-muted); 
            font-size: 1.125rem; 
            margin-bottom: 40px; 
            max-width: 90%; 
        }
        .hero__buttons { 
            display: flex; 
            gap: 16px; 
            margin-bottom: 40px; 
        }

        .floating-card {
            padding: 32px; 
            border-radius: var(--radius-xl);
            background: linear-gradient(160deg, rgba(19, 38, 60, 0.8) 0%, rgba(10, 25, 41, 0.9) 100%);
            border: 1px solid rgba(255,255,255,0.1);
            animation: float-hero 6s ease-in-out infinite;
            position: relative;
            width: 100%;
        }
        .floating-card::before {
            content: ''; 
            position: absolute; 
            inset: -1px; 
            border-radius: inherit; 
            padding: 1px;
            background: linear-gradient(135deg, rgba(0,200,83,0.5), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; 
            mask-composite: exclude; 
            pointer-events: none;
        }

        @keyframes float-hero {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .card__header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 24px; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
            padding-bottom: 16px; 
            flex-wrap: wrap;
        }
        .card__header h3 { 
            font-size: 1.2rem; 
            font-weight: 600; 
        }
        .live-indicator { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            color: #4ade80; 
            font-weight: 700; 
            font-size: 0.85rem; 
        }
        .dot { 
            width: 8px; 
            height: 8px; 
            background: #4ade80; 
            border-radius: 50%; 
            box-shadow: 0 0 10px #4ade80; 
            animation: blink 2s infinite; 
        }

        .stat-item { 
            display: flex; 
            justify-content: space-between; 
            padding: 12px 0; 
            border-bottom: 1px solid rgba(255,255,255,0.03); 
        }
        .stat-item:last-child { 
            border-bottom: none; 
        }
        .stat-item .label { 
            color: var(--text-muted); 
            font-size: 0.95rem; 
        }
        .stat-item .value { 
            color: white; 
            font-weight: 600; 
            font-family: var(--font-heading); 
            font-size: 1.1rem; 
            text-shadow: 0 0 10px rgba(0,200,83,0.3); 
        }

        /* Investment Plans */
        .investment-plans { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 25px; 
            margin-bottom: 50px; 
        }

        .plan-card {
            padding: 25px; 
            text-align: center; 
            position: relative; 
            transition: 0.4s ease;
            display: flex; 
            flex-direction: column; 
            height: 100%;
            background: linear-gradient(145deg, rgba(14, 29, 47, 0.8), rgba(10, 25, 41, 0.9));
            border: var(--glass-border);
            border-radius: var(--radius-lg);
        }
        .plan-card:hover { 
            transform: translateY(-8px); 
            border-color: var(--primary-accent); 
            box-shadow: 0 15px 40px rgba(0,0,0,0.4); 
        }

        .plan-header {
            margin-bottom: 15px;
        }

        .plan-badge {
            background: rgba(0, 200, 83, 0.2);
            color: #A7FFEB;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: inline-block;
            border: 1px solid rgba(0, 200, 83, 0.4);
        }

        .plan-card.featured {
            border: 2px solid var(--primary-accent);
            transform: scale(1.05);
            background: linear-gradient(145deg, rgba(19, 38, 60, 0.9), rgba(14, 29, 47, 0.95));
        }

        .plan-card.featured .plan-badge {
            background: var(--gradient-main);
            color: white;
        }

        .plan-roi { 
            font-size: 1.4rem; 
            font-weight: 700; 
            margin-bottom: 10px; 
            color: #A7FFEB; 
            text-shadow: 0 0 15px rgba(0,200,83,0.3);
            line-height: 1.3;
        }

        .plan-range { 
            background: rgba(255,255,255,0.05); 
            padding: 10px; 
            border-radius: 10px;
            margin-bottom: 20px; 
            color: var(--text-muted); 
            font-size: 0.9rem; 
            border: 1px solid rgba(255,255,255,0.05);
        }
        .plan-features { 
            list-style: none; 
            margin-bottom: 25px; 
            flex-grow: 1; 
            text-align: left; 
            padding-left: 10px; 
        }
        .plan-features li { 
            margin-bottom: 10px; 
            color: #cbd5e1; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            font-size: 0.85rem;
        }
        .plan-features li i { 
            color: #00E676; 
            font-size: 0.8rem; 
        }

        /* Plan Details Box */
        .plan-details-box {
            background: rgba(0, 200, 83, 0.1);
            border: 1px solid rgba(0, 200, 83, 0.2);
            padding: 20px;
            border-radius: 12px;
            margin-top: 10px;
        }

        .plan-details-box h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .plan-details-box ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .plan-details-box li {
            color: #A7FFEB;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .plan-details-box li i {
            color: #00E676; 
            font-size: 0.8rem;
        }

        /* Forms */
        .investment-form-container, 
        .referral-link-container { 
            max-width: 600px; 
            margin: 0 auto 40px; 
            padding: 30px; 
            width: 100%;
        }

        .referral-link-container {
            text-align: center;
        }
        .referral-link-container p {
            margin-bottom: 20px;
            color: var(--text-muted);
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
            width: 100%;
        }

        .form-group label { 
            display: block; 
            margin-bottom: 8px; 
            color: var(--text-muted); 
            font-size: 0.9rem; 
            font-weight: 500;
        }

        .form-input, 
        .link-input {
            width: 100%; 
            padding: 14px 16px; 
            border-radius: 12px;
            background: rgba(10, 25, 41, 0.8); 
            border: 1px solid rgba(255,255,255,0.1);
            color: white; 
            font-family: var(--font-body); 
            font-size: 1rem;
            transition: 0.3s;
        }
        .form-input:focus, 
        .link-input:focus { 
            border-color: var(--primary-accent); 
            box-shadow: 0 0 0 3px rgba(0, 200, 83, 0.1); 
        }

        .link-input-group {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
            width: 100%;
            flex-wrap: wrap;
        }

        .link-input-group .link-input {
            flex: 1;
            min-width: 0;
        }

        .link-input-group .btn {
            min-width: 100px;
        }

        .amount-range {
            font-size: 0.8rem; 
            color: var(--text-muted); 
            margin-top: 6px;
        }

        .form-hint {
            color: var(--text-muted); 
            font-size: 0.8rem; 
            margin-top: 5px; 
            display: block;
        }
        
        #confirmInvestment {
            margin: 20px auto 0;
            display: flex;
            min-width: 200px;
        }

        /* Alerts & States */
        .alert {
            padding: 20px; 
            border-radius: 16px; 
            display: flex; 
            align-items: center; 
            gap: 16px;
            max-width: 800px; 
            margin: 0 auto 30px; 
            font-size: 0.95rem;
            background: rgba(15, 23, 42, 0.9); 
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
        }
        .alert-warning { 
            background: rgba(245, 158, 11, 0.1); 
            border-color: rgba(245, 158, 11, 0.3); 
            color: #fbbf24; 
        }
        
        .empty-state { 
            text-align: center; 
            padding: 60px 20px; 
        }
        .empty-icon { 
            font-size: 3rem; 
            color: rgba(255,255,255,0.1); 
            margin-bottom: 20px; 
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-active {
            background: rgba(34, 197, 94, 0.15);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status-completed {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .wallet-address {
            font-family: monospace;
            background: rgba(255,255,255,0.08);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            word-break: break-all;
            max-width: 100%;
            display: inline-block;
        }

        /* Popups & Notifications */
        .investment-success-popup {
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(8px); 
            z-index: 2000;
            display: flex; 
            justify-content: center; 
            align-items: center;
            opacity: 0; 
            visibility: hidden; 
            transition: 0.3s;
        }
        .investment-success-popup.active { 
            opacity: 1; 
            visibility: visible; 
        }
        .investment-success { 
            max-width: 450px; 
            width: 90%; 
            padding: 40px; 
            text-align: center; 
            transform: scale(0.9); 
            transition: 0.3s; 
            background: linear-gradient(145deg, #0e1d2f, #071422);
            border: 1px solid var(--primary-accent);
            border-radius: var(--radius-xl);
            box-shadow: 0 0 50px rgba(0, 200, 83, 0.2);
        }
        .investment-success-popup.active .investment-success { 
            transform: scale(1); 
        }

        .success-icon {
            width: 80px; 
            height: 80px; 
            background: var(--gradient-main); 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 2rem; 
            color: white;
            margin: 0 auto 24px; 
            box-shadow: 0 0 30px rgba(0, 230, 118, 0.5);
        }

        .success-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .notification {
            position: fixed; 
            top: 100px; 
            right: 20px; 
            padding: 16px 24px;
            background: rgba(14, 29, 47, 0.95); 
            border: 1px solid rgba(255,255,255,0.1);
            color: white; 
            border-radius: 12px; 
            z-index: 3000;
            transform: translateX(120%); 
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex; 
            align-items: center; 
            gap: 10px;
            max-width: 90%;
            word-break: break-word;
        }
        .notification.show { 
            transform: translateX(0); 
        }
        .notification.success { 
            border-left: 4px solid #00C853; 
            background: linear-gradient(to right, rgba(0, 200, 83, 0.1), rgba(14, 29, 47, 0.9));
        }
        .notification.error { 
            border-left: 4px solid #ef4444; 
            background: linear-gradient(to right, rgba(239, 68, 68, 0.1), rgba(14, 29, 47, 0.9));
        }
        .notification.info { 
            border-left: 4px solid #00BFA5; 
            background: linear-gradient(to right, rgba(0, 191, 165, 0.1), rgba(14, 29, 47, 0.9));
        }

        /* Referral Levels Compact */
        .referral-levels-compact, 
        .leadership-levels-compact { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 15px; 
            margin-bottom: 40px; 
            margin-top: 30px;
        }
        .referral-level-compact, 
        .leadership-level-compact { 
            padding: 20px; 
            text-align: center; 
            transition: 0.3s;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
        }
        .referral-level-compact:hover, 
        .leadership-level-compact:hover { 
            background: rgba(0, 200, 83, 0.1); 
            border-color: rgba(0, 200, 83, 0.3); 
            transform: translateY(-3px);
        }

        .level-number-compact {
            width: 32px; 
            height: 32px; 
            background: rgba(255,255,255,0.1); 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin: 0 auto 10px;
            font-size: 0.8rem; 
            font-weight: 700; 
            color: var(--primary-accent);
        }
        .level-commission-compact { 
            color: white; 
            font-weight: 700; 
            font-size: 1rem; 
            margin-bottom: 5px;
        }
        .level-requirement-compact { 
            font-size: 0.7rem; 
            color: var(--text-muted); 
            line-height: 1.2; 
        }

        /* FAQ - UPDATED with 10 questions */
        .faq-item { 
            margin-bottom: 16px; 
            overflow: hidden; 
            transition: 0.3s; 
            border-radius: var(--radius-lg);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .faq-item:hover { 
            border-color: rgba(0, 200, 83, 0.3); 
        }
        .faq-question { 
            padding: 20px; 
            cursor: pointer; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        .faq-question h3 { 
            font-size: 1rem; 
            font-weight: 600; 
            margin: 0; 
            color: white;
        }
        .faq-icon { 
            transition: 0.3s; 
            color: var(--primary-accent); 
        }
        .faq-answer { 
            max-height: 0; 
            overflow: hidden; 
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0 20px; 
            color: var(--text-muted); 
            line-height: 1.7;
        }
        .faq-item.active .faq-answer { 
            padding-bottom: 20px; 
            max-height: 500px; 
        }
        .faq-item.active .faq-icon { 
            transform: rotate(180deg); 
        }

        /* Footer */
        .footer { 
            border-top: 1px solid rgba(255,255,255,0.05); 
            padding: 80px 0 30px; 
            background: #030810; 
            margin-top: auto; 
        }
        .footer__content {
            text-align: center;
        }
        .footer__logo { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            margin-bottom: 20px; 
            justify-content: center; 
        }
        .footer__logo img { 
            width: 30px; 
            height: 30px; 
            filter: drop-shadow(0 0 8px rgba(0, 200, 83, 0.5));
        }
        .footer__logo span { 
            font-size: 1.5rem; 
            font-weight: 700; 
            font-family: var(--font-heading); 
            color: white; 
        }
        .footer__content p {
            color: var(--text-muted); 
            max-width: 500px; 
            margin: 0 auto 30px; 
            line-height: 1.6;
        }
        .footer__social { 
            display: flex; 
            gap: 16px; 
            margin-top: 30px; 
            justify-content: center; 
        }
        .social__link {
            width: 44px; 
            height: 44px; 
            border-radius: 12px; 
            background: rgba(255,255,255,0.05);
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white;
            transition: 0.3s; 
            border: 1px solid rgba(255,255,255,0.05); 
            text-decoration: none;
        }
        .social__link:hover { 
            background: var(--primary-accent); 
            transform: translateY(-3px); 
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.4); 
        }
        .footer__bottom { 
            margin-top: 60px; 
            padding-top: 30px; 
            border-top: 1px solid rgba(255,255,255,0.05); 
            text-align: center; 
            color: rgba(255,255,255,0.3); 
            font-size: 0.9rem; 
        }

        /* Team Data Container */
        .team-data-container {
            margin-top: 30px;
            width: 100%;
        }

        .team-filters {
            margin-bottom: 20px;
            display: flex;
            justify-content: flex-end;
            width: 100%;
        }

        .compact-select {
            width: 100%;
            max-width: 200px;
            height: 45px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        /* Mobile Table View for Team Data */
        .mobile-team-view {
            display: none;
        }

        .mobile-team-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 15px;
        }

        .mobile-team-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mobile-team-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .mobile-team-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .mobile-team-value {
            color: white;
            font-weight: 600;
            text-align: right;
            max-width: 60%;
            word-break: break-word;
        }

        /* --- RESPONSIVE ADJUSTMENTS --- */

        @media (max-width: 1200px) {
            .hero__title { font-size: 3rem; }
            .section__title { font-size: 2.5rem; }
        }

        @media (max-width: 968px) {
            .hero__container { 
                grid-template-columns: 1fr; 
                text-align: center; 
                gap: 50px; 
            }
            .hero__content { 
                display: flex; 
                flex-direction: column; 
                align-items: center; 
            }
            .hero__title { font-size: 2.5rem; }
            .hero__buttons { 
                justify-content: center; 
                flex-wrap: wrap; 
            }
            .compact-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            .investment-plans {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
            .plan-roi {
                font-size: 1.3rem;
            }
            .plan-card.featured {
                transform: scale(1);
            }
            
            /* FIXED: Timer for tablet */
            .timer-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .timer-box {
                padding: 12px;
            }
            
            .timer-value {
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .section {
                padding-top: 110px; 
                padding-bottom: 60px;
            }

            .nav__menu {
                position: fixed; 
                top: var(--header-height); 
                left: -100%; 
                width: 100%; 
                height: calc(100vh - var(--header-height));
                background: #050b14; 
                flex-direction: column; 
                padding: 40px 24px;
                transition: 0.4s; 
                align-items: flex-start; 
                border-top: 1px solid rgba(255,255,255,0.05);
                overflow-y: auto;
            }
            .nav__menu.active { left: 0; }
            .nav__list { 
                flex-direction: column; 
                gap: 20px; 
                width: 100%; 
                margin-bottom: 30px; 
            }
            .nav__toggle { display: block; }
            
            .section__title { font-size: 2.2rem; }
            .hero__title { font-size: 2.2rem; }
            .hero__description { font-size: 1rem; }
            
            /* FIXED: Timer for mobile */
            .timer-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .timer-box {
                padding: 15px 12px;
            }
            
            .timer-label {
                font-size: 0.75rem;
                white-space: normal;
                line-height: 1.2;
            }
            
            .timer-value {
                font-size: 1.1rem;
                line-height: 1.3;
            }
            
            /* FIXED: Mobile Dashboard adjustments */
            .compact-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .compact-buttons {
                flex-direction: column;
                align-items: stretch;
            }
            .compact-buttons .compact-btn {
                max-width: none;
                width: 100%;
            }
            
            .dashboard-subtitle {
                font-size: 1.2rem;
            }
            
            .compact-select {
                max-width: none;
            }
            
            .link-input-group {
                flex-direction: column;
            }
            .link-input-group .btn {
                width: 100%;
            }
            
            /* FIXED: Grid columns for small screens */
            .referral-levels-compact, 
            .leadership-levels-compact {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* FIXED: Investment plans for mobile */
            .investment-plans {
                grid-template-columns: 1fr;
            }
            
            /* FIXED: Team data for mobile */
            .premium-table {
                display: none;
            }
            
            .mobile-team-view {
                display: block;
            }
            
            .team-filters {
                justify-content: center;
            }
            
            .compact-select {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .hero__title { font-size: 2rem; }
            .hero__buttons { 
                flex-direction: column; 
                width: 100%; 
            }
            .hero__buttons .btn { 
                width: 100%; 
            }
            
            .section__title { 
                font-size: 1.8rem; 
            }
            
            /* FIXED: Timer for very small screens */
            .timer-container {
                grid-template-columns: 1fr;
            }
            
            .timer-box {
                padding: 12px 10px;
            }
            
            .timer-value {
                font-size: 1rem;
            }
            
            .referral-levels-compact, 
            .leadership-levels-compact {
                grid-template-columns: repeat(2, 1fr); 
                gap: 10px;
            }
            
            .level-commission-compact {
                font-size: 0.9rem;
            }
            
            .investment-form-container, 
            .referral-link-container {
                padding: 24px 16px;
            }
            
            .faq-question h3 {
                font-size: 0.9rem;
            }
            
            .plan-card {
                padding: 20px;
            }
            
            .premium-table-container {
                padding: 15px;
                margin: 20px 0;
            }
            
            /* FIXED: Card headers for mobile */
            .card__header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .card__header h3 {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 360px) {
            .referral-levels-compact, 
            .leadership-levels-compact {
                grid-template-columns: 1fr;
            }
            
            .timer-value {
                font-size: 0.9rem;
            }
            
            .compact-card .stat-value {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="loader">
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
        </div>
        <div class="preloader-text">NEXGENFI</div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <a href="#" class="nav__logo">
                <img src="image/logo.png" alt="N" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.marginLeft='0'">
                <div class="logo__text">NEXGENFI</div>
            </a>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a class="nav__link active" data-section="home">Home</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="dashboard">Dashboard</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="invest">Invest</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="referral">Referral</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="leadership">Leadership</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="team">Team Data</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="faq">FAQ</a></li>
                </ul>

                <button class="btn btn--outline btn-sm" id="connectWallet">
                    <i class="fas fa-wallet"></i>
                    Connect Wallet
                </button>
            </div>

            <div class="nav__toggle" id="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Home Section -->
        <section class="hero section" id="home">
            <div class="hero__container container">
                <div class="hero__content">
                    <div class="badge">
                        <i class="fas fa-chart-line"></i> Smart Investment Platform
                    </div>
                    <h1 class="hero__title">
                        Maximize Your Returns with <br>
                        <span class="gradient-text">NexGenFi Protocol</span>
                    </h1>
                    <p class="hero__description">
                        Invest USDT and earn 4% daily capital return plus ROI bonuses. Build your team and unlock 20-level referral commissions and 7 leadership ranks.
                    </p>
                    <div class="hero__buttons">
                        <button class="btn btn--primary btn-lg" data-section="invest">
                            <i class="fas fa-rocket"></i>
                            Start Investing
                        </button>
                        <button class="btn btn--outline btn-lg" data-section="dashboard">
                            <i class="fas fa-chart-line"></i>
                            View Dashboard
                        </button>
                    </div>
                </div>
                <div class="hero__image">
                    <div class="floating-card">
                        <div class="card__header">
                            <h3>Platform Statistics</h3>
                            <div class="live-indicator">
                                <span class="dot"></span>
                                LIVE
                            </div>
                        </div>
                        <div class="card__content">
                            <div class="stat-item">
                                <span class="label">Contract Balance</span>
                                <span class="value" id="statContractBalance">Loading...</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Total Users</span>
                                <span class="value" id="statTotalUsers">Loading...</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Total Investment</span>
                                <span class="value" id="statTotalInvest">Loading...</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Total Paid Out</span>
                                <span class="value" id="statTotalPaid">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section class="section" id="dashboard" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Your Dashboard</h2>
                    <p class="section__subtitle">Monitor all your investments and earnings</p>
                </div>

                <div class="alert alert-warning" id="dashboardWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to view your dashboard</span>
                </div>

                <!-- Timer Section - FIXED for Mobile -->
                <div class="timer-section" id="timerSection" style="display: none; margin-bottom: 30px;">
                    <div class="timer-container">
                        <div class="timer-box">
                            <div class="timer-label">Next ROI Withdrawal</div>
                            <div class="timer-value" id="roiTimerDisplay">--:--:--</div>
                        </div>
                        <div class="timer-box">
                            <div class="timer-label">Capital Available In</div>
                            <div class="timer-value" id="capitalTimerDisplay">--:--:--</div>
                        </div>
                    </div>
                </div>

                <!-- Investment Income Section -->
                <div class="dashboard-section" id="investmentIncomeSection" style="display: none;">
                    <h3 class="dashboard-subtitle">Investment Income</h3>
                    <div class="income-stats compact-stats">
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-wallet"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="totalDepositDashboard">0 USDT</div>
                                <div class="stat-label">Total Deposit</div>
                            </div>
                        </div>
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-coins"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="capitalEarning">0 USDT</div>
                                <div class="stat-label">Capital Earning</div>
                            </div>
                        </div>
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="roiEarning">0 USDT</div>
                                <div class="stat-label">ROI Earning</div>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons compact-buttons">
                        <button class="btn btn--primary compact-btn" id="claimROI">
                            <i class="fas fa-download"></i> Claim ROI
                        </button>
                        <button class="btn btn--outline compact-btn" id="claimCapital">
                            <i class="fas fa-university"></i> Claim Capital
                        </button>
                        <button class="btn btn--primary compact-btn" id="compoundInvestment">
                            <i class="fas fa-recycle"></i> Compound ROI
                        </button>
                    </div>
                </div>

                <!-- Network Income Section -->
                <div class="dashboard-section" id="networkIncomeSection" style="display: none;">
                    <h3 class="dashboard-subtitle">Network Income</h3>
                    <div class="income-stats compact-stats">
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-gift"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="referralEarning">0 USDT</div>
                                <div class="stat-label">Referral Earning</div>
                            </div>
                        </div>
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-user-plus"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="onboardingEarning">0 USDT</div>
                                <div class="stat-label">Onboarding Earning</div>
                            </div>
                        </div>
                        <div class="stat-card compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-crown"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="leadershipEarning">0 USDT</div>
                                <div class="stat-label">Leadership Earning</div>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons compact-buttons">
                        <button class="btn btn--primary compact-btn" id="claimNetwork">
                            <i class="fas fa-download"></i> Claim Network
                        </button>
                        <button class="btn btn--outline compact-btn" id="compoundNetwork">
                            <i class="fas fa-recycle"></i> Compound Network
                        </button>
                    </div>
                </div>

                <!-- My Positions Section -->
                <div class="my-positions-section premium-card" id="myPositionsSection" style="display: none;">
                    <div class="section__header" style="margin-bottom: 30px;">
                        <h3 class="section__title" style="font-size: 1.8rem;">My Positions</h3>
                        <p class="section__subtitle">History of your deposits and compounds</p>
                    </div>

                    <div class="premium-table-container">
                        <div class="table-responsive">
                            <table class="premium-table">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Plan</th>
                                        <th>Start Date</th>
                                        <th>End Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="positionsTableBody">
                                    <!-- Positions will be generated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="empty-state" id="noInvestmentsMessage" style="display: none;">
                    <div class="empty-icon"><i class="fas fa-chart-pie"></i></div>
                    <h3>No Active Investments</h3>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">Make your first deposit to start earning daily returns</p>
                    <button class="btn btn--primary compact-btn" data-section="invest">
                        <i class="fas fa-rocket"></i> Start Investing
                    </button>
                </div>
            </div>
        </section>

        <!-- Invest Section -->
        <section class="section" id="invest" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Make a Deposit</h2>
                    <p class="section__subtitle">Choose your investment plan</p>
                </div>

                <div class="alert alert-warning" id="investWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to make a deposit</span>
                </div>

                <div class="investment-plans" id="investmentPlans">
                    <!-- Beginner Plan -->
                    <div class="plan-card">
                        <div class="plan-header">
                            <div class="plan-badge">Beginner</div>
                            <div class="plan-roi">4% Capital + 0.5% ROI</div>
                        </div>
                        <div class="plan-range">10 - 499 USDT</div>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> Capital Earning: 4% daily</li>
                            <li><i class="fas fa-check"></i> ROI Earning: 0.5% daily</li>
                            <li><i class="fas fa-check"></i> Withdraw Interval: Every 24h</li>
                            <li><i class="fas fa-check"></i> Cycle: 25 days</li>
                            <li><i class="fas fa-check"></i> Max 100 positions per user</li>
                        </ul>
                        <button class="btn btn--outline select-plan" data-plan="beginner">
                            Select Plan
                        </button>
                    </div>

                    <!-- Basic Plan -->
                    <div class="plan-card">
                        <div class="plan-header">
                            <div class="plan-badge">Basic</div>
                            <div class="plan-roi">4% Capital + 0.75% ROI</div>
                        </div>
                        <div class="plan-range">500 - 999 USDT</div>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> Capital Earning: 4% daily</li>
                            <li><i class="fas fa-check"></i> ROI Earning: 0.75% daily</li>
                            <li><i class="fas fa-check"></i> Withdraw Interval: Every 12h</li>
                            <li><i class="fas fa-check"></i> Cycle: 25 days</li>
                            <li><i class="fas fa-check"></i> Max 100 positions per user</li>
                        </ul>
                        <button class="btn btn--outline select-plan" data-plan="basic">
                            Select Plan
                        </button>
                    </div>

                    <!-- Standard Plan -->
                    <div class="plan-card featured">
                        <div class="plan-header">
                            <div class="plan-badge">Standard</div>
                            <div class="plan-roi">4% Capital + 1% ROI</div>
                        </div>
                        <div class="plan-range">1,000 - 2,499 USDT</div>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> Capital Earning: 4% daily</li>
                            <li><i class="fas fa-check"></i> ROI Earning: 1% daily</li>
                            <li><i class="fas fa-check"></i> Withdraw Interval: Every 8h</li>
                            <li><i class="fas fa-check"></i> Cycle: 25 days</li>
                            <li><i class="fas fa-check"></i> Max 100 positions per user</li>
                        </ul>
                        <button class="btn btn--primary select-plan" data-plan="standard">
                            Select Plan
                        </button>
                    </div>

                    <!-- High Plan -->
                    <div class="plan-card">
                        <div class="plan-header">
                            <div class="plan-badge">High</div>
                            <div class="plan-roi">4% Capital + 1.25% ROI</div>
                        </div>
                        <div class="plan-range">2,500 - 4,999 USDT</div>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> Capital Earning: 4% daily</li>
                            <li><i class="fas fa-check"></i> ROI Earning: 1.25% daily</li>
                            <li><i class="fas fa-check"></i> Withdraw Interval: Every 4h</li>
                            <li><i class="fas fa-check"></i> Cycle: 25 days</li>
                            <li><i class="fas fa-check"></i> Max 100 positions per user</li>
                        </ul>
                        <button class="btn btn--outline select-plan" data-plan="high">
                            Select Plan
                        </button>
                    </div>

                    <!-- Premium Plan -->
                    <div class="plan-card">
                        <div class="plan-header">
                            <div class="plan-badge">Premium</div>
                            <div class="plan-roi">4% Capital + 1.5% ROI</div>
                        </div>
                        <div class="plan-range">5,000+ USDT</div>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> Capital Earning: 4% daily</li>
                            <li><i class="fas fa-check"></i> ROI Earning: 1.5% daily</li>
                            <li><i class="fas fa-check"></i> Withdraw Interval: Every 2h</li>
                            <li><i class="fas fa-check"></i> Cycle: 25 days</li>
                            <li><i class="fas fa-check"></i> Max 100 positions per user</li>
                        </ul>
                        <button class="btn btn--outline select-plan" data-plan="premium">
                            Select Plan
                        </button>
                    </div>
                </div>

                <!-- Investment Form -->
                <div class="investment-form-container premium-card" id="investmentForm" style="display: none;">
                    <div class="card__header">
                        <h2 id="selectedPlanTitle">Complete Your Deposit</h2>
                        <button class="btn btn--outline btn-sm compact-btn" id="backToPlans">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                    </div>

                    <div class="investment-form">
                        <div class="form-group">
                            <label for="selectedPlanInfo">Selected Plan Details</label>
                            <div class="plan-details-box" id="selectedPlanDetails">
                                <!-- Plan details will be filled by JavaScript -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="investmentAmount">Deposit Amount (USDT)</label>
                            <input type="number" id="investmentAmount" class="form-input" placeholder="0.00" min="10" step="0.01">
                            <div class="amount-range" id="amountRange">
                                Enter amount within plan range
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="referrerAddress">Upline Address (Optional)</label>
                            <input type="text" id="referrerAddress" class="form-input" placeholder="0x...">
                            <small class="form-hint">
                                Leave empty if no upline
                            </small>
                        </div>

                        <button class="btn btn--primary btn-lg compact-btn" id="confirmInvestment">
                            <i class="fas fa-check-circle"></i> Confirm Deposit
                        </button>
                    </div>
                </div>

                <div class="investment-success-popup" id="investmentSuccessPopup">
                    <div class="investment-success">
                        <div class="success-icon"><i class="fas fa-check"></i></div>
                        <h2>Deposit Successful!</h2>
                        <p style="color: var(--text-muted); margin: 10px 0 20px;">Your investment is now active and earning returns.</p>
                        <div class="success-actions">
                            <button class="btn btn--primary compact-btn" data-section="dashboard">Go to Dashboard</button>
                            <button class="btn btn--outline compact-btn" id="newInvestment">New Deposit</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Referral Section -->
        <section class="section" id="referral" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">20-Level Referral Program</h2>
                    <p class="section__subtitle">Earn commissions from your entire network structure</p>
                </div>

                <div class="alert alert-warning" id="referralWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to access referral program</span>
                </div>

                <div class="referral-stats compact-stats" id="referralStats" style="display: none;">
                    <div class="stat-card compact-card premium-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalDownlines">0</div>
                            <div class="stat-label">Total Downlines</div>
                        </div>
                    </div>
                    <div class="stat-card compact-card premium-card">
                        <div class="stat-icon"><i class="fas fa-layer-group"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="qualifiedLevels">0</div>
                            <div class="stat-label">Qualified Levels</div>
                        </div>
                    </div>
                </div>

                <div class="referral-link-container premium-card" id="referralLinkSection" style="display: none;">
                    <h2>Your Referral Link</h2>
                    <p>Share this link to grow your network and earn commissions</p>
                    <div class="link-input-group">
                        <input type="text" id="referralLink" class="link-input" readonly>
                        <button class="btn btn--primary" id="copyLink">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                </div>

                <div class="referral-levels-compact" id="referralLevelsCompact">
                    <!-- 20 Levels will be generated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Leadership Section -->
        <section class="section" id="leadership" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">7-Tier Leadership Program</h2>
                    <p class="section__subtitle">Unlock higher bonuses by building a strong team</p>
                </div>

                <div class="alert alert-warning" id="leadershipWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to view leadership program</span>
                </div>

                <div class="leadership-stats compact-stats" id="leadershipStats" style="display: none;">
                    <div class="stat-card compact-card premium-card">
                        <div class="stat-icon"><i class="fas fa-medal"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="currentRank">-</div>
                            <div class="stat-label">Current Rank</div>
                        </div>
                    </div>
                    <div class="stat-card compact-card premium-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="teamMembers">0</div>
                            <div class="stat-label">Team Members</div>
                        </div>
                    </div>
                    <div class="stat-card compact-card premium-card">
                        <div class="stat-icon"><i class="fas fa-coins"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="teamDeposits">0 USDT</div>
                            <div class="stat-label">Team Deposits</div>
                        </div>
                    </div>
                </div>

                <div class="leadership-levels-compact" id="leadershipLevelsCompact">
                    <!-- 7 Ranks will be generated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Team Data Section - FIXED for Mobile -->
        <section class="section" id="team" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Team Data</h2>
                    <p class="section__subtitle">View your entire team structure and performance</p>
                </div>

                <div class="alert alert-warning" id="teamWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to view team data</span>
                </div>

                <div class="team-data-container premium-card" id="teamTableContainer" style="display: none;">
                    <div class="team-filters">
                        <select id="levelFilter" class="form-input compact-select">
                            <option value="">All Levels</option>
                            <option value="1">Level 1</option>
                            <option value="2">Level 2</option>
                            <option value="3">Level 3</option>
                            <option value="4">Level 4</option>
                            <option value="5">Level 5</option>
                            <option value="6">Level 6</option>
                            <option value="7">Level 7</option>
                            <option value="8">Level 8</option>
                            <option value="9">Level 9</option>
                            <option value="10">Level 10</option>
                        </select>
                    </div>
                    <div class="premium-table-container">
                        <div class="table-responsive">
                            <table class="premium-table team-table">
                                <thead>
                                    <tr>
                                        <th>Address</th>
                                        <th>Level</th>
                                        <th>Deposit</th>
                                        <th>Active</th>
                                        <th>Team</th>
                                        <th>Volume</th>
                                    </tr>
                                </thead>
                                <tbody id="teamTableBody">
                                    <!-- Team data will be generated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <!-- Mobile View for Team Data -->
                        <div class="mobile-team-view" id="mobileTeamView">
                            <!-- Mobile team cards will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section - UPDATED with 10 questions -->
        <section class="section" id="faq" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Frequently Asked Questions</h2>
                    <p class="section__subtitle">Everything you need to know about NexGenFi</p>
                </div>

                <div class="faq-container">
                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What is the minimum deposit?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>The minimum deposit is 10 USDT. There is no maximum limit, but each user can have up to 100 active investment positions.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How are returns calculated?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>You earn two types of returns: 1) 4% daily capital return (distributed per second, claimable after 25 days), 2) ROI bonus from 0.5% to 1.5% daily based on deposit amount (distributed per second, claimable every 2-24 hours depending on plan).</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What is the 10% admin fee?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>A 10% admin fee is automatically deducted from each deposit and sent to the admin wallet. This fee does NOT reduce your deposit amount - if you deposit 100 USDT, you get 100 USDT worth of investment position.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How does the referral program work?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Earn commissions from 20 levels of your downline network. Level 1: 1.5%, Level 2: 1.25%, Levels 3-10: 1%, Levels 11-15: 0.5%, Levels 16-20: 0.25%. You must meet qualification requirements for each level.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What are the referral qualification requirements?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Levels 1-5: Active deposit of 10 USDT. Levels 6-10: Minimum 2 qualified downlines (100 USDT deposit each). Levels 11-15: Minimum 3 qualified downlines. Levels 16-20: Minimum 5 qualified downlines.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What is the onboarding bonus?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>When your direct downline makes their first deposit: 50-99 USDT = 5 USDT bonus, 100+ USDT = 10 USDT bonus. This bonus is paid only once per downline.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How does the leadership program work?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>7 ranks with increasing bonuses (0.5% to 5%) based on team size and team deposit volume. Bonuses are calculated from ROI withdrawals of your downlines.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>When can I withdraw my capital?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Capital return (4% daily) is distributed per second and becomes claimable after the 25-day investment cycle ends. ROI bonuses can be claimed based on your plan's withdrawal frequency.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>Can I compound my earnings?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Yes! You can compound both ROI bonuses and referral/leadership rewards to open new investment positions. Minimum compound amount is 1 USDT and there is no admin fee for compounding.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>Is there a minimum withdrawal amount?</h3>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Minimum withdrawal is 1 USDT for all types of earnings (ROI, rewards, and capital).</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__brand">
                    <div class="footer__logo">
                        <img src="image/logo.png" alt="" class="logo" onerror="this.style.display='none'">
                        <span>NexGenFi</span>
                    </div>
                    <p>
                        Smart investment platform with 4% daily capital return, 20-level referral commissions, and 7-tier leadership rewards
                    </p>
                    <div class="footer__social">
                        <a href="#" class="social__link"><i class="fab fa-telegram-plane"></i></a>
                        <a href="#" class="social__link"><i class="fab fa-twitter"></i></a>
                        <a href="https://bscscan.com/address/0x3eCCC758B9a82D2eB543Dc13433B9beaA46baBF9" target="_blank" class="social__link"><i class="fas fa-file-contract"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; NexGenFi All Rights Reserved</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Updated contract address and ABI for new contract
        const CONTRACT_ADDRESS = '0x3eCCC758B9a82D2eB543Dc13433B9beaA46baBF9';
        const USDT_ADDRESS = '0x55d398326f99059fF775485246999027B3197955';
        const READ_ONLY_RPC = 'https://bsc-dataseed1.binance.org/';

        const USDT_ABI = [
            {"constant": false, "inputs": [{"name": "_spender", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "approve", "outputs": [{"name": "", "type": "bool"}], "type": "function"}, 
            {"constant": true, "inputs": [{"name": "_owner", "type": "address"}], "name": "balanceOf", "outputs": [{"name": "balance", "type": "uint256"}], "type": "function"}, 
            {"constant": true, "inputs": [{"name": "_owner", "type": "address"}, {"name": "_spender", "type": "address"}], "name": "allowance", "outputs": [{"name": "", "type": "uint256"}], "type": "function"}, 
            {"constant": true, "inputs": [], "name": "decimals", "outputs": [{"name": "", "type": "uint8"}], "type": "function"}
        ];

        const CONTRACT_ABI = [{"inputs":[{"internalType":"address","name":"_usdtAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"investmentIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"CapitalReturnWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isRoi","type":"bool"}],"name":"Compounded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":true,"internalType":"address","name":"upline","type":"address"}],"name":"Deposited","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"rankIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"LeadershipBonusEarned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"address","name":"downline","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"OnboardingBonusEarned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"promoter","type":"address"},{"indexed":false,"internalType":"uint256","name":"depositAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"planIndex","type":"uint256"}],"name":"PromoterAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"address","name":"downline","type":"address"},{"indexed":false,"internalType":"uint256","name":"level","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ReferralBonusEarned","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ReferralExpiredWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"totalAmount","type":"uint256"}],"name":"RewardWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"investmentIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RoiBonusWithdrawn","type":"event"},{"inputs":[],"name":"ADMIN_FEE_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ADMIN_WALLET","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CAPITAL_RETURN_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CYCLE_DURATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_DEPOSIT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_WITHDRAW","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ONBOARDING_BONUS_100","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ONBOARDING_BONUS_50","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ONBOARDING_THRESHOLD_100","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ONBOARDING_THRESHOLD_50","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_PER_DAY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"}],"name":"claimCapitalReturn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"}],"name":"claimRoiBonus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"compoundRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"compoundRoiBonus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"upline","type":"address"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAdminFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getBonusStats","outputs":[{"internalType":"uint256","name":"totalReferralPayout","type":"uint256"},{"internalType":"uint256","name":"totalOnboardingPayout","type":"uint256"},{"internalType":"uint256","name":"totalLeadershipPayout","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCapitalReturnPercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCycleDuration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getDownlines","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getGlobalStats","outputs":[{"internalType":"uint256","name":"contractBalance","type":"uint256"},{"internalType":"uint256","name":"investorsCount","type":"uint256"},{"internalType":"uint256","name":"totalInvestment","type":"uint256"},{"internalType":"uint256","name":"totalPayout","type":"uint256"},{"internalType":"uint256","name":"totalPositionsCreated","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getInvestmentDetails","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"availableRoi","type":"uint256"},{"internalType":"uint256","name":"availableCapital","type":"uint256"},{"internalType":"uint256","name":"nextWithdrawTime","type":"uint256"},{"internalType":"uint256","name":"planIndex","type":"uint256"},{"internalType":"bool","name":"isActive","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getInvestmentsCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMinDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getOnboardingBonusDetails","outputs":[{"internalType":"uint256","name":"threshold50","type":"uint256"},{"internalType":"uint256","name":"threshold100","type":"uint256"},{"internalType":"uint256","name":"bonus50","type":"uint256"},{"internalType":"uint256","name":"bonus100","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getPlanDetails","outputs":[{"internalType":"uint256[5]","name":"thresholds","type":"uint256[5]"},{"internalType":"uint256[5]","name":"roiPercentages","type":"uint256[5]"},{"internalType":"uint256[5]","name":"withdrawIntervals","type":"uint256[5]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRankDetails","outputs":[{"internalType":"string[7]","name":"names","type":"string[7]"},{"internalType":"uint256[7]","name":"requiredTeams","type":"uint256[7]"},{"internalType":"uint256[7]","name":"requiredDeposits","type":"uint256[7]"},{"internalType":"uint256[7]","name":"bonusPercents","type":"uint256[7]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReferralBonuses","outputs":[{"internalType":"uint256[20]","name":"","type":"uint256[20]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalInvested","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalPaidOut","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalUsers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserInfo","outputs":[{"internalType":"address","name":"upline","type":"address"},{"internalType":"uint256","name":"totalDeposits","type":"uint256"},{"internalType":"uint256","name":"userTotalWithdrawn","type":"uint256"},{"internalType":"uint256","name":"positionsCount","type":"uint256"},{"internalType":"bool","name":"isPromoter","type":"bool"},{"internalType":"uint256","name":"teamCount","type":"uint256"},{"internalType":"uint256","name":"teamDeposits","type":"uint256"},{"internalType":"string","name":"rank","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserRank","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserReturns","outputs":[{"internalType":"uint256","name":"totalCapitalReturn","type":"uint256"},{"internalType":"uint256","name":"totalRoiBonus","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserRewards","outputs":[{"internalType":"uint256","name":"totalReferralBonus","type":"uint256"},{"internalType":"uint256","name":"totalOnboardingBonus","type":"uint256"},{"internalType":"uint256","name":"leadershipBonus","type":"uint256"},{"internalType":"uint256","name":"availableRewards","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserTotalRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"isUserActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"planThresholds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"ranks","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"requiredTeam","type":"uint256"},{"internalType":"uint256","name":"requiredDeposit","type":"uint256"},{"internalType":"uint256","name":"bonusPercent","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"referralBonuses","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"roiBonusPercentages","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"roiWithdrawIntervals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"promoter","type":"address"},{"internalType":"uint256","name":"depositAmount","type":"uint256"},{"internalType":"uint256","name":"planIndex","type":"uint256"}],"name":"setWalletPromoter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalExpiredReferrals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalInvested","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalInvestors","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLeadershipPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalOnboardingPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalPositions","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalReferralPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalWithdrawn","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"usdtToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawReferralExpired","outputs":[],"stateMutability":"nonpayable","type":"function"}];

        let web3;
        let contract;
        let usdtContract;
        let userAccount;
        let referralAddress = null;
        let userInvestments = [];
        let selectedPlan = null;
        let roiTimerInterval = null;
        let capitalTimerInterval = null;
        let userTeamData = [];

        const preloader = document.querySelector('.preloader');
        const navMenu = document.getElementById('nav-menu');
        const navToggle = document.getElementById('nav-toggle');
        const connectWalletBtn = document.getElementById('connectWallet');
        const notification = document.getElementById('notification');
        const investmentSuccessPopup = document.getElementById('investmentSuccessPopup');

        const sections = {
            home: document.getElementById('home'),
            dashboard: document.getElementById('dashboard'),
            invest: document.getElementById('invest'),
            referral: document.getElementById('referral'),
            leadership: document.getElementById('leadership'),
            team: document.getElementById('team'),
            faq: document.getElementById('faq')
        };

        // Investment Plans Definition
        const PLANS = {
            beginner: {
                name: 'Beginner',
                min: 10,
                max: 499,
                capital: 4,
                roi: 0.5,
                withdrawInterval: 24, // hours
                cycle: 25 // days
            },
            basic: {
                name: 'Basic',
                min: 500,
                max: 999,
                capital: 4,
                roi: 0.75,
                withdrawInterval: 12,
                cycle: 25
            },
            standard: {
                name: 'Standard',
                min: 1000,
                max: 2499,
                capital: 4,
                roi: 1,
                withdrawInterval: 8,
                cycle: 25
            },
            high: {
                name: 'High',
                min: 2500,
                max: 4999,
                capital: 4,
                roi: 1.25,
                withdrawInterval: 4,
                cycle: 25
            },
            premium: {
                name: 'Premium',
                min: 5000,
                max: null, // No maximum
                capital: 4,
                roi: 1.5,
                withdrawInterval: 2,
                cycle: 25
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            checkPreloader();
            checkURLForReferral();
            setupFAQ();
            generateReferralLevelsCompact();
            generateLeadershipLevelsCompact();
        });

        function setupFAQ() {
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    const isActive = item.classList.contains('active');
                    faqItems.forEach(otherItem => otherItem.classList.remove('active'));
                    if (!isActive) item.classList.add('active');
                });
            });
        }

        function checkURLForReferral() {
            const urlParams = new URLSearchParams(window.location.search);
            const refAddress = urlParams.get('ref');
            if (refAddress && Web3.utils.isAddress(refAddress)) {
                referralAddress = refAddress;
                document.getElementById('referrerAddress').value = refAddress;
                showNotification('Referral address detected!', 'success');
            }
        }

        async function initializeApp() {
            try {
                web3 = new Web3(new Web3.providers.HttpProvider(READ_ONLY_RPC));
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                await loadGlobalStats();
            } catch (error) {
                console.error('Error initializing app:', error);
            }
            
            if (typeof window.ethereum !== 'undefined') {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accounts.length > 0) await connectWallet();
                } catch (err) {
                    console.error('Error checking wallet connection:', err);
                }
            }
        }

        async function loadGlobalStats() {
            if (!contract) return;
            try {
                const stats = await contract.methods.getGlobalStats().call();
                const formatUSDT = (weiValue) => {
                    const value = parseFloat(web3.utils.fromWei(weiValue, 'ether'));
                    return value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                };
                
                document.getElementById('statContractBalance').textContent = `${formatUSDT(stats.contractBalance)} USDT`;
                document.getElementById('statTotalUsers').textContent = parseInt(stats.investorsCount).toLocaleString('en-US');
                document.getElementById('statTotalInvest').textContent = `${formatUSDT(stats.totalInvestment)} USDT`;
                document.getElementById('statTotalPaid').textContent = `${formatUSDT(stats.totalPayout)} USDT`;
            } catch (error) {
                console.error('Error loading global stats:', error);
            }
        }

        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                return showNotification('Please install MetaMask or Trust Wallet!', 'error');
            }
            
            try {
                web3 = new Web3(window.ethereum);
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                usdtContract = new web3.eth.Contract(USDT_ABI, USDT_ADDRESS);

                // Check and switch to BSC network
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                if (chainId !== '0x38') {
                    try {
                        await window.ethereum.request({ 
                            method: 'wallet_switchEthereumChain', 
                            params: [{ chainId: '0x38' }] 
                        });
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            await window.ethereum.request({ 
                                method: 'wallet_addEthereumChain', 
                                params: [{ 
                                    chainId: '0x38', 
                                    chainName: 'Binance Smart Chain', 
                                    nativeCurrency: { 
                                        name: 'BNB', 
                                        symbol: 'BNB', 
                                        decimals: 18 
                                    }, 
                                    rpcUrls: ['https://bsc-dataseed.binance.org/'], 
                                    blockExplorerUrls: ['https://bscscan.com/'] 
                                }] 
                            });
                        } else {
                            throw switchError;
                        }
                    }
                }
                
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                if (accounts.length > 0) {
                    userAccount = accounts[0];
                    updateWalletUI();
                    await loadUserData();
                    showNotification('Wallet connected successfully!', 'success');
                }
            } catch (error) {
                console.error('Error connecting wallet:', error);
                showNotification('Wallet connection failed', 'error');
            }
        }

        function setupEventListeners() {
            navToggle.addEventListener('click', () => navMenu.classList.toggle('active'));
            document.addEventListener('click', (e) => {
                if (navMenu.classList.contains('active') && !navMenu.contains(e.target) && !navToggle.contains(e.target)) {
                    navMenu.classList.remove('active');
                }
            });
            
            document.querySelectorAll('.nav__link, button[data-section]').forEach(el => {
                el.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetElement = e.target.closest('[data-section]');
                    if (targetElement) {
                        showSection(targetElement.getAttribute('data-section'));
                        navMenu.classList.remove('active');
                    }
                });
            });
            
            connectWalletBtn.addEventListener('click', connectWallet);
            
            // Plan selection
            document.querySelectorAll('.select-plan').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedPlan = this.getAttribute('data-plan');
                    showInvestmentForm();
                });
            });
            
            document.getElementById('backToPlans').addEventListener('click', showPlans);
            document.getElementById('confirmInvestment').addEventListener('click', confirmInvestment);
            document.getElementById('newInvestment').addEventListener('click', () => {
                investmentSuccessPopup.classList.remove('active');
                showPlans();
            });
            
            // Dashboard buttons
            document.getElementById('claimROI').addEventListener('click', claimAllROI);
            document.getElementById('claimCapital').addEventListener('click', claimAllCapital);
            document.getElementById('compoundInvestment').addEventListener('click', compoundInvestmentROI);
            document.getElementById('claimNetwork').addEventListener('click', claimNetworkEarnings);
            document.getElementById('compoundNetwork').addEventListener('click', compoundNetworkEarnings);
            
            document.getElementById('copyLink').addEventListener('click', copyReferralLink);
            document.getElementById('investmentAmount').addEventListener('input', validateAmount);
            
            // Team data filter
            document.getElementById('levelFilter').addEventListener('change', filterTeamData);
            
            if (window.ethereum) {
                window.ethereum.on('accountsChanged', (accounts) => {
                    userAccount = accounts.length > 0 ? accounts[0] : null;
                    updateWalletUI();
                    if (userAccount) {
                        loadUserData();
                    } else {
                        showWalletAlerts();
                        generateReferralLevelsCompact();
                        generateLeadershipLevelsCompact();
                    }
                });
                
                window.ethereum.on('chainChanged', () => {
                    window.location.reload();
                });
            }
        }

        function showSection(sectionName) {
            Object.values(sections).forEach(section => {
                if (section) section.style.display = 'none';
            });
            
            document.querySelectorAll('.nav__link').forEach(link => link.classList.remove('active'));
            
            if (sections[sectionName]) {
                sections[sectionName].style.display = 'flex';
                if (sectionName !== 'home') {
                    sections[sectionName].style.flexDirection = 'column';
                }
                window.scrollTo(0, 0);
                
                const navLink = document.querySelector(`.nav__link[data-section="${sectionName}"]`);
                if (navLink) navLink.classList.add('active');
                
                // Refresh data when switching to certain sections
                if (sectionName === 'dashboard' && userAccount) {
                    loadUserData();
                } else if (sectionName === 'team' && userAccount) {
                    loadTeamData();
                }
            }
        }

        function updateWalletUI() {
            if (userAccount) {
                connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> ${userAccount.substring(0, 6)}...${userAccount.substring(userAccount.length - 4)}`;
                hideWalletAlerts();
            } else {
                connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> Connect Wallet`;
                showWalletAlerts();
            }
        }

        function showWalletAlerts() {
            ['dashboardWalletAlert', 'investWalletAlert', 'referralWalletAlert', 'leadershipWalletAlert', 'teamWalletAlert'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'flex';
            });
            
            ['investmentIncomeSection', 'networkIncomeSection', 'myPositionsSection', 'noInvestmentsMessage', 'referralStats', 'referralLinkSection', 'leadershipStats', 'teamTableContainer'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });
            
            document.getElementById('timerSection').style.display = 'none';
        }

        function hideWalletAlerts() {
            ['dashboardWalletAlert', 'investWalletAlert', 'referralWalletAlert', 'leadershipWalletAlert', 'teamWalletAlert'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });
            
            document.getElementById('referralLinkSection').style.display = 'block';
        }

        async function loadUserData() {
            if (!contract || !userAccount) return;
            
            try {
                // Get user information from new contract functions
                const userInfo = await contract.methods.getUserInfo(userAccount).call();
                const userReturns = await contract.methods.getUserReturns(userAccount).call();
                const userRewards = await contract.methods.getUserRewards(userAccount).call();
                
                const formatUSDT = (weiValue) => {
                    return parseFloat(web3.utils.fromWei(weiValue, 'ether')).toFixed(2);
                };
                
                // Update Investment Income
                document.getElementById('totalDepositDashboard').textContent = `${formatUSDT(userInfo.totalDeposits)} USDT`;
                document.getElementById('capitalEarning').textContent = `${formatUSDT(userReturns.totalCapitalReturn)} USDT`;
                document.getElementById('roiEarning').textContent = `${formatUSDT(userReturns.totalRoiBonus)} USDT`;
                
                // Update Network Income
                document.getElementById('referralEarning').textContent = `${formatUSDT(userRewards.totalReferralBonus)} USDT`;
                document.getElementById('onboardingEarning').textContent = `${formatUSDT(userRewards.totalOnboardingBonus)} USDT`;
                document.getElementById('leadershipEarning').textContent = `${formatUSDT(userRewards.leadershipBonus)} USDT`;
                
                // Update referral stats
                document.getElementById('totalDownlines').textContent = userInfo.teamCount;
                
                // Update leadership stats
                document.getElementById('currentRank').textContent = userInfo.rank || 'No Rank';
                document.getElementById('teamMembers').textContent = userInfo.teamCount;
                document.getElementById('teamDeposits').textContent = `${formatUSDT(userInfo.teamDeposits)} USDT`;
                
                // Load positions and update timers
                const investmentsCount = parseInt(userInfo.positionsCount);
                await loadPositions(investmentsCount);
                
                // Show/hide sections based on data
                const hasInvestments = investmentsCount > 0;
                
                document.getElementById('noInvestmentsMessage').style.display = hasInvestments ? 'none' : 'block';
                document.getElementById('investmentIncomeSection').style.display = 'block';
                document.getElementById('networkIncomeSection').style.display = 'block';
                document.getElementById('myPositionsSection').style.display = hasInvestments ? 'block' : 'none';
                document.getElementById('referralStats').style.display = 'grid';
                document.getElementById('leadershipStats').style.display = 'grid';
                
                // Generate referral link
                generateReferralLink();
                
                // Update qualified levels display
                await updateQualifiedLevels(userInfo.totalDeposits, userInfo.teamCount);
                
                // Start timers
                startTimers();
                
            } catch (error) {
                console.error('Error loading user data:', error);
                showNotification('Error loading user data', 'error');
            }
        }

        async function loadPositions(investmentsCount) {
            if (!contract || !userAccount) return;
            
            try {
                const positionsTableBody = document.getElementById('positionsTableBody');
                if (!positionsTableBody) return;
                
                positionsTableBody.innerHTML = '';
                userInvestments = [];
                
                const formatUSDT = (weiValue) => {
                    return parseFloat(web3.utils.fromWei(weiValue, 'ether')).toFixed(2);
                };
                
                for (let i = 0; i < investmentsCount; i++) {
                    try {
                        const investment = await contract.methods.getInvestmentDetails(userAccount, i).call();
                        
                        const inv = {
                            index: i,
                            amount: investment.amount,
                            startTime: investment.startTime,
                            endTime: investment.endTime,
                            isActive: investment.isActive,
                            availableCapital: investment.availableCapital,
                            availableRoi: investment.availableRoi,
                            planIndex: investment.planIndex,
                            nextRoiTime: investment.nextWithdrawTime
                        };
                        
                        userInvestments.push(inv);
                        
                        // Determine plan name based on planIndex
                        let planName = 'Unknown';
                        const planNames = ['Beginner', 'Basic', 'Standard', 'High', 'Premium'];
                        if (investment.planIndex < planNames.length) {
                            planName = planNames[investment.planIndex];
                        }
                        
                        // Create position row
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${i + 1}</td>
                            <td>${investment.isActive ? 'Deposit' : 'Completed'}</td>
                            <td>${formatUSDT(investment.amount)} USDT</td>
                            <td>${planName}</td>
                            <td>${new Date(parseInt(investment.startTime) * 1000).toLocaleDateString()}</td>
                            <td>${new Date(parseInt(investment.endTime) * 1000).toLocaleDateString()}</td>
                            <td><span class="status-badge ${investment.isActive ? 'status-active' : 'status-completed'}">
                                <i class="fas ${investment.isActive ? 'fa-circle-notch fa-spin' : 'fa-check-circle'}"></i>
                                ${investment.isActive ? 'Active' : 'Completed'}
                            </span></td>
                        `;
                        
                        positionsTableBody.appendChild(row);
                    } catch (error) {
                        console.error(`Error loading position ${i}:`, error);
                    }
                }
                
            } catch (error) {
                console.error('Error loading positions:', error);
            }
        }

        async function updateQualifiedLevels(totalDeposits, teamCount) {
            // Calculate qualified levels based on requirements
            let qualifiedLevels = 0;
            const userDeposit = parseFloat(web3.utils.fromWei(totalDeposits, 'ether'));
            
            // Levels 1-5: Active deposit of 10 USDT
            if (userDeposit >= 10) {
                qualifiedLevels = 5;
            }
            
            // Levels 6-10: Minimum 2 qualified downlines (100 USDT deposit each)
            if (parseInt(teamCount) >= 2) {
                qualifiedLevels = Math.max(qualifiedLevels, 10);
            }
            
            // Levels 11-15: Minimum 3 qualified downlines
            if (parseInt(teamCount) >= 3) {
                qualifiedLevels = Math.max(qualifiedLevels, 15);
            }
            
            // Levels 16-20: Minimum 5 qualified downlines
            if (parseInt(teamCount) >= 5) {
                qualifiedLevels = Math.max(qualifiedLevels, 20);
            }
            
            document.getElementById('qualifiedLevels').textContent = qualifiedLevels;
        }

        function validateAmount() {
            const amountInput = document.getElementById('investmentAmount');
            const amount = parseFloat(amountInput.value) || 0;
            const amountRange = document.getElementById('amountRange');
            
            if (!selectedPlan) return;
            
            const plan = PLANS[selectedPlan];
            const min = plan.min;
            const max = plan.max;
            
            if (amount < min) {
                amountRange.innerHTML = `Minimum amount for ${plan.name} plan is ${min} USDT`;
                amountRange.style.color = '#ef4444';
            } else if (max !== null && amount > max) {
                amountRange.innerHTML = `Maximum amount for ${plan.name} plan is ${max} USDT`;
                amountRange.style.color = '#ef4444';
            } else {
                amountRange.innerHTML = `Amount within ${plan.name} plan range (${min}${max ? ' - ' + max : '+'} USDT)`;
                amountRange.style.color = 'var(--text-muted)';
            }
        }

        function showInvestmentForm() {
            if (!userAccount) {
                return showNotification('Please connect your wallet first!', 'error');
            }
            
            // Check max positions (100 per user)
            if (userInvestments.length >= 100) {
                return showNotification('Maximum 100 investment positions reached!', 'error');
            }
            
            if (!selectedPlan) {
                return showNotification('Please select a plan first!', 'error');
            }
            
            const plan = PLANS[selectedPlan];
            
            // Update form with selected plan details
            document.getElementById('selectedPlanTitle').textContent = `${plan.name} Plan`;
            
            const planDetails = document.getElementById('selectedPlanDetails');
            planDetails.innerHTML = `
                <h4>${plan.name} Plan Details</h4>
                <ul>
                    <li><i class="fas fa-check"></i> Range: ${plan.min}${plan.max ? ' - ' + plan.max : '+'} USDT</li>
                    <li><i class="fas fa-check"></i> Capital Earning: ${plan.capital}% daily</li>
                    <li><i class="fas fa-check"></i> ROI Earning: ${plan.roi}% daily</li>
                    <li><i class="fas fa-check"></i> Withdraw Interval: Every ${plan.withdrawInterval}h</li>
                    <li><i class="fas fa-check"></i> Cycle: ${plan.cycle} days</li>
                </ul>
            `;
            
            // Update amount input
            const amountInput = document.getElementById('investmentAmount');
            amountInput.min = plan.min;
            if (plan.max) {
                amountInput.max = plan.max;
            } else {
                amountInput.removeAttribute('max');
            }
            amountInput.value = plan.min;
            
            // Update validation message
            validateAmount();
            
            // Show/hide form sections
            document.getElementById('investmentPlans').style.display = 'none';
            document.getElementById('investmentForm').style.display = 'block';
        }

        function showPlans() {
            selectedPlan = null;
            document.getElementById('investmentPlans').style.display = 'grid';
            document.getElementById('investmentForm').style.display = 'none';
        }

        async function confirmInvestment() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            if (!selectedPlan) {
                return showNotification('Please select a plan first', 'error');
            }
            
            const amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
            const plan = PLANS[selectedPlan];
            
            // Validate amount against plan
            if (amount < plan.min) {
                return showNotification(`Minimum amount for ${plan.name} plan is ${plan.min} USDT`, 'error');
            }
            if (plan.max !== null && amount > plan.max) {
                return showNotification(`Maximum amount for ${plan.name} plan is ${plan.max} USDT`, 'error');
            }
            
            let uplineAddress = document.getElementById('referrerAddress').value.trim() || referralAddress || '0x0000000000000000000000000000000000000000';
            
            const confirmBtn = document.getElementById('confirmInvestment');
            const originalText = confirmBtn.innerHTML;
            confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            confirmBtn.disabled = true;

            try {
                const amountWei = web3.utils.toWei(amount.toString(), 'ether');
                
                // Check and approve USDT allowance
                const allowance = await usdtContract.methods.allowance(userAccount, CONTRACT_ADDRESS).call();
                if (new BigNumber(allowance).isLessThan(new BigNumber(amountWei))) {
                    showNotification('Approving USDT...', 'info');
                    await usdtContract.methods.approve(
                        CONTRACT_ADDRESS, 
                        '115792089237316195423570985008687907853269984665640564039457584007913129639935'
                    ).send({ from: userAccount });
                    showNotification('USDT approved successfully!', 'success');
                }
                
                // Make deposit
                showNotification('Making deposit...', 'info');
                await contract.methods.deposit(amountWei, uplineAddress).send({ from: userAccount });
                
                showNotification('Deposit successful! Your investment is now active.', 'success');
                investmentSuccessPopup.classList.add('active');
                
                // Refresh data
                await loadUserData();
                await loadGlobalStats();
                
            } catch (error) {
                console.error('Deposit error:', error);
                showNotification('Deposit failed: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                confirmBtn.innerHTML = originalText;
                confirmBtn.disabled = false;
            }
        }

        function startTimers() {
            // Clear existing intervals
            if (roiTimerInterval) clearInterval(roiTimerInterval);
            if (capitalTimerInterval) clearInterval(capitalTimerInterval);
            
            // Find the investment with the earliest next ROI withdrawal time
            let nextROITime = null;
            let nextCapitalTime = null;
            
            userInvestments.forEach(inv => {
                if (inv.isActive && inv.nextRoiTime) {
                    const nextROI = parseInt(inv.nextRoiTime);
                    const currentTime = Math.floor(Date.now() / 1000);
                    
                    if (nextROI > currentTime) {
                        if (!nextROITime || nextROI < nextROITime) {
                            nextROITime = nextROI;
                        }
                    }
                    
                    // Calculate capital claim time
                    if (parseInt(inv.endTime) > currentTime) {
                        if (!nextCapitalTime || parseInt(inv.endTime) < nextCapitalTime) {
                            nextCapitalTime = parseInt(inv.endTime);
                        }
                    }
                }
            });
            
            // Show timer section if there are active timers
            if (nextROITime || nextCapitalTime) {
                document.getElementById('timerSection').style.display = 'block';
            } else {
                document.getElementById('timerSection').style.display = 'none';
            }
            
            // Start ROI timer
            if (nextROITime) {
                updateROITimer(nextROITime);
                roiTimerInterval = setInterval(() => {
                    updateROITimer(nextROITime);
                }, 1000);
            } else {
                document.getElementById('roiTimerDisplay').textContent = 'Ready to Claim';
                document.getElementById('claimROI').disabled = false;
            }
            
            // Start Capital timer
            if (nextCapitalTime) {
                updateCapitalTimer(nextCapitalTime);
                capitalTimerInterval = setInterval(() => {
                    updateCapitalTimer(nextCapitalTime);
                }, 1000);
            } else {
                document.getElementById('capitalTimerDisplay').textContent = 'Ready to Claim';
                document.getElementById('claimCapital').disabled = false;
            }
        }

        function updateROITimer(endTime) {
            const timerElement = document.getElementById('roiTimerDisplay');
            const claimBtn = document.getElementById('claimROI');
            const currentTime = Math.floor(Date.now() / 1000);
            const timeLeft = endTime - currentTime;
            
            if (timeLeft > 0) {
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                claimBtn.disabled = true;
            } else {
                timerElement.textContent = 'Ready to Claim';
                claimBtn.disabled = false;
            }
        }

        function updateCapitalTimer(endTime) {
            const timerElement = document.getElementById('capitalTimerDisplay');
            const claimBtn = document.getElementById('claimCapital');
            const currentTime = Math.floor(Date.now() / 1000);
            const timeLeft = endTime - currentTime;
            
            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / 86400);
                const hours = Math.floor((timeLeft % 86400) / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                // FIXED: Better display for mobile
                if (window.innerWidth <= 768) {
                    timerElement.textContent = `${days}d ${hours}h ${minutes}m`;
                } else {
                    timerElement.textContent = `${days}d ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
                claimBtn.disabled = true;
            } else {
                timerElement.textContent = 'Ready to Claim';
                claimBtn.disabled = false;
            }
        }

        async function claimAllROI() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            // Check minimum amount
            let totalAvailableROI = 0;
            for (let i = 0; i < userInvestments.length; i++) {
                const inv = userInvestments[i];
                if (inv.isActive && parseFloat(web3.utils.fromWei(inv.availableRoi, 'ether')) > 0) {
                    const currentTime = Math.floor(Date.now() / 1000);
                    if (parseInt(inv.nextRoiTime) <= currentTime) {
                        totalAvailableROI += parseFloat(web3.utils.fromWei(inv.availableRoi, 'ether'));
                    }
                }
            }
            
            if (totalAvailableROI < 1) {
                return showNotification('Minimum 1 USDT required to claim ROI', 'error');
            }
            
            const btn = document.getElementById('claimROI');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Claiming...';
            btn.disabled = true;
            
            try {
                // Get available ROI for all positions
                let positionsToClaim = [];
                
                for (let i = 0; i < userInvestments.length; i++) {
                    const inv = userInvestments[i];
                    if (inv.isActive && parseFloat(web3.utils.fromWei(inv.availableRoi, 'ether')) > 0) {
                        const currentTime = Math.floor(Date.now() / 1000);
                        
                        if (parseInt(inv.nextRoiTime) <= currentTime) {
                            positionsToClaim.push(i);
                        }
                    }
                }
                
                if (positionsToClaim.length === 0) {
                    showNotification('No ROI available to claim yet', 'info');
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    return;
                }
                
                // Claim ROI for each position
                showNotification(`Claiming ROI from ${positionsToClaim.length} positions...`, 'info');
                
                for (const positionIndex of positionsToClaim) {
                    await contract.methods.claimRoiBonus(positionIndex).send({ from: userAccount });
                }
                
                showNotification(`ROI claimed successfully!`, 'success');
                await loadUserData();
                
            } catch (error) {
                console.error('Claim ROI error:', error);
                showNotification('Failed to claim ROI: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function claimAllCapital() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            // Check minimum amount
            let totalAvailableCapital = 0;
            for (let i = 0; i < userInvestments.length; i++) {
                const inv = userInvestments[i];
                const currentTime = Math.floor(Date.now() / 1000);
                
                if ((!inv.isActive || parseInt(inv.endTime) <= currentTime) && 
                    parseFloat(web3.utils.fromWei(inv.availableCapital, 'ether')) > 0) {
                    totalAvailableCapital += parseFloat(web3.utils.fromWei(inv.availableCapital, 'ether'));
                }
            }
            
            if (totalAvailableCapital < 1) {
                return showNotification('Minimum 1 USDT required to claim capital', 'error');
            }
            
            const btn = document.getElementById('claimCapital');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Claiming...';
            btn.disabled = true;
            
            try {
                // Find positions with available capital
                const positionsToClaim = [];
                
                for (let i = 0; i < userInvestments.length; i++) {
                    const inv = userInvestments[i];
                    const currentTime = Math.floor(Date.now() / 1000);
                    
                    if ((!inv.isActive || parseInt(inv.endTime) <= currentTime) && 
                        parseFloat(web3.utils.fromWei(inv.availableCapital, 'ether')) > 0) {
                        positionsToClaim.push(i);
                    }
                }
                
                if (positionsToClaim.length === 0) {
                    showNotification('No capital available to claim yet', 'info');
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    return;
                }
                
                // Claim capital for each position
                showNotification(`Claiming capital from ${positionsToClaim.length} positions...`, 'info');
                
                for (const positionIndex of positionsToClaim) {
                    await contract.methods.claimCapitalReturn(positionIndex).send({ from: userAccount });
                }
                
                showNotification(`Capital claimed successfully!`, 'success');
                await loadUserData();
                
            } catch (error) {
                console.error('Claim capital error:', error);
                showNotification('Failed to claim capital: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function compoundInvestmentROI() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            // Find the first position with available ROI to compound
            let positionToCompound = -1;
            let amountToCompound = '0';
            let compoundAmount = 0;
            
            for (let i = 0; i < userInvestments.length; i++) {
                const inv = userInvestments[i];
                if (inv.isActive) {
                    const amount = parseFloat(web3.utils.fromWei(inv.availableRoi, 'ether'));
                    if (amount >= 1) {
                        positionToCompound = i;
                        amountToCompound = inv.availableRoi;
                        compoundAmount = amount;
                        break;
                    }
                }
            }
            
            if (positionToCompound === -1) {
                return showNotification('Minimum 1 USDT ROI required for compounding', 'error');
            }
            
            const btn = document.getElementById('compoundInvestment');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Compounding...';
            btn.disabled = true;
            
            try {
                showNotification(`Compounding ${compoundAmount.toFixed(2)} USDT ROI from position ${positionToCompound + 1}...`, 'info');
                await contract.methods.compoundRoiBonus(positionToCompound, amountToCompound).send({ from: userAccount });
                
                showNotification(`ROI compounded successfully!`, 'success');
                await loadUserData();
                
            } catch (error) {
                console.error('Compound ROI error:', error);
                showNotification('Failed to compound ROI: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function claimNetworkEarnings() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            // Check minimum amount
            const userRewards = await contract.methods.getUserRewards(userAccount).call();
            const availableRewards = parseFloat(web3.utils.fromWei(userRewards.availableRewards, 'ether'));
            
            if (availableRewards < 1) {
                return showNotification('Minimum 1 USDT required to claim network earnings', 'error');
            }
            
            const btn = document.getElementById('claimNetwork');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Claiming...';
            btn.disabled = true;
            
            try {
                showNotification('Claiming network earnings...', 'info');
                await contract.methods.claimRewards().send({ from: userAccount });
                showNotification('Network earnings claimed successfully!', 'success');
                await loadUserData();
                
            } catch (error) {
                console.error('Claim network error:', error);
                showNotification('Failed to claim network earnings: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function compoundNetworkEarnings() {
            if (!contract || !userAccount) {
                return showNotification('Please connect wallet first', 'error');
            }
            
            // Get available rewards
            const userRewards = await contract.methods.getUserRewards(userAccount).call();
            const totalRewards = new BigNumber(userRewards.availableRewards);
            const compoundAmount = parseFloat(web3.utils.fromWei(totalRewards.toString(), 'ether'));
            
            if (compoundAmount < 1) {
                return showNotification('Minimum 1 USDT required for compounding network earnings', 'error');
            }
            
            const btn = document.getElementById('compoundNetwork');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Compounding...';
            btn.disabled = true;
            
            try {
                showNotification(`Compounding ${compoundAmount.toFixed(2)} USDT network earnings...`, 'info');
                await contract.methods.compoundRewards(totalRewards.toString()).send({ from: userAccount });
                showNotification('Network earnings compounded successfully!', 'success');
                await loadUserData();
                
            } catch (error) {
                console.error('Compound network error:', error);
                showNotification('Failed to compound network earnings: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function loadTeamData() {
            if (!contract || !userAccount) return;
            
            try {
                // Get downlines from contract
                const downlines = await contract.methods.getDownlines(userAccount).call();
                userTeamData = [];
                
                const formatUSDT = (weiValue) => {
                    return parseFloat(web3.utils.fromWei(weiValue, 'ether')).toFixed(2);
                };
                
                // For each downline, get their information
                for (let i = 0; i < downlines.length; i++) {
                    const downlineAddress = downlines[i];
                    
                    try {
                        // Get user info for downline
                        const userInfo = await contract.methods.getUserInfo(downlineAddress).call();
                        const isActive = await contract.methods.isUserActive(downlineAddress).call();
                        
                        const teamMember = {
                            address: downlineAddress,
                            level: i + 1, // Level is index + 1
                            totalDeposit: userInfo.totalDeposits,
                            activeDeposit: isActive ? userInfo.totalDeposits : '0',
                            teamCount: userInfo.teamCount,
                            teamDeposits: userInfo.teamDeposits
                        };
                        
                        userTeamData.push(teamMember);
                    } catch (error) {
                        console.error(`Error loading downline ${downlineAddress}:`, error);
                    }
                }
                
                // Display team data
                displayTeamData();
                
                document.getElementById('teamTableContainer').style.display = 'block';
                
            } catch (error) {
                console.error('Error loading team data:', error);
                showNotification('Error loading team data', 'error');
            }
        }

        function displayTeamData() {
            const teamTableBody = document.getElementById('teamTableBody');
            const mobileTeamView = document.getElementById('mobileTeamView');
            const levelFilter = document.getElementById('levelFilter').value;
            
            teamTableBody.innerHTML = '';
            mobileTeamView.innerHTML = '';
            
            const formatUSDT = (weiValue) => {
                return parseFloat(web3.utils.fromWei(weiValue, 'ether')).toFixed(2);
            };
            
            if (userTeamData.length === 0) {
                teamTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <div style="color: var(--text-muted);">
                                <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>No team members found</p>
                            </div>
                        </td>
                    </tr>
                `;
                mobileTeamView.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                        <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>No team members found</p>
                    </div>
                `;
                return;
            }
            
            // Filter team data by level if filter is set
            const filteredData = levelFilter 
                ? userTeamData.filter(member => member.level.toString() === levelFilter)
                : userTeamData;
            
            if (filteredData.length === 0) {
                teamTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <div style="color: var(--text-muted);">
                                <i class="fas fa-filter" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>No team members found for selected level</p>
                            </div>
                        </td>
                    </tr>
                `;
                mobileTeamView.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                        <i class="fas fa-filter" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>No team members found for selected level</p>
                    </div>
                `;
                return;
            }
            
            // Display filtered team data for desktop
            filteredData.forEach(member => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><span class="wallet-address">${member.address.substring(0, 6)}...${member.address.substring(member.address.length - 4)}</span></td>
                    <td>${member.level}</td>
                    <td>${formatUSDT(member.totalDeposit)} USDT</td>
                    <td>${formatUSDT(member.activeDeposit)} USDT</td>
                    <td>${member.teamCount}</td>
                    <td>${formatUSDT(member.teamDeposits)} USDT</td>
                `;
                teamTableBody.appendChild(row);
            });
            
            // Display filtered team data for mobile
            filteredData.forEach(member => {
                const mobileCard = document.createElement('div');
                mobileCard.className = 'mobile-team-card';
                mobileCard.innerHTML = `
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Address</div>
                        <div class="mobile-team-value wallet-address">${member.address.substring(0, 6)}...${member.address.substring(member.address.length - 4)}</div>
                    </div>
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Level</div>
                        <div class="mobile-team-value">${member.level}</div>
                    </div>
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Total Deposit</div>
                        <div class="mobile-team-value">${formatUSDT(member.totalDeposit)} USDT</div>
                    </div>
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Active Deposit</div>
                        <div class="mobile-team-value">${formatUSDT(member.activeDeposit)} USDT</div>
                    </div>
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Team Size</div>
                        <div class="mobile-team-value">${member.teamCount}</div>
                    </div>
                    <div class="mobile-team-row">
                        <div class="mobile-team-label">Team Volume</div>
                        <div class="mobile-team-value">${formatUSDT(member.teamDeposits)} USDT</div>
                    </div>
                `;
                mobileTeamView.appendChild(mobileCard);
            });
        }

        function filterTeamData() {
            displayTeamData();
        }

        function generateReferralLink() {
            const linkInput = document.getElementById('referralLink');
            if (linkInput && userAccount) {
                linkInput.value = `${window.location.origin}${window.location.pathname}?ref=${userAccount}`;
            }
        }

        function copyReferralLink() {
            const linkInput = document.getElementById('referralLink');
            if (linkInput && linkInput.value) {
                navigator.clipboard.writeText(linkInput.value).then(() => {
                    showNotification('Referral link copied to clipboard!', 'success');
                }).catch(err => {
                    console.error('Failed to copy:', err);
                    showNotification('Failed to copy link', 'error');
                });
            }
        }

        function generateReferralLevelsCompact() {
            const levelsContainer = document.getElementById('referralLevelsCompact');
            if (!levelsContainer) return;
            
            const levels = [
                { level: 1, bonus: '1.5%', requirement: '10 USDT Deposit' },
                { level: 2, bonus: '1.25%', requirement: '10 USDT Deposit' },
                { level: 3, bonus: '1%', requirement: '10 USDT Deposit' },
                { level: 4, bonus: '1%', requirement: '10 USDT Deposit' },
                { level: 5, bonus: '1%', requirement: '10 USDT Deposit' },
                { level: 6, bonus: '1%', requirement: '2 Qualified Downlines' },
                { level: 7, bonus: '1%', requirement: '2 Qualified Downlines' },
                { level: 8, bonus: '1%', requirement: '2 Qualified Downlines' },
                { level: 9, bonus: '1%', requirement: '2 Qualified Downlines' },
                { level: 10, bonus: '1%', requirement: '2 Qualified Downlines' },
                { level: 11, bonus: '0.5%', requirement: '3 Qualified Downlines' },
                { level: 12, bonus: '0.5%', requirement: '3 Qualified Downlines' },
                { level: 13, bonus: '0.5%', requirement: '3 Qualified Downlines' },
                { level: 14, bonus: '0.5%', requirement: '3 Qualified Downlines' },
                { level: 15, bonus: '0.5%', requirement: '3 Qualified Downlines' },
                { level: 16, bonus: '0.25%', requirement: '5 Qualified Downlines' },
                { level: 17, bonus: '0.25%', requirement: '5 Qualified Downlines' },
                { level: 18, bonus: '0.25%', requirement: '5 Qualified Downlines' },
                { level: 19, bonus: '0.25%', requirement: '5 Qualified Downlines' },
                { level: 20, bonus: '0.25%', requirement: '5 Qualified Downlines' }
            ];
            
            levelsContainer.innerHTML = levels.map(level => `
                <div class="referral-level-compact">
                    <div class="level-number-compact">${level.level}</div>
                    <div class="level-commission-compact">${level.bonus}</div>
                    <div class="level-requirement-compact">${level.requirement}</div>
                </div>
            `).join('');
        }

        function generateLeadershipLevelsCompact() {
            const levelsContainer = document.getElementById('leadershipLevelsCompact');
            if (!levelsContainer) return;
            
            const ranks = [
                { level: 1, title: 'Inviter', bonus: '0.5%', team: '50', deposit: '2,500' },
                { level: 2, title: 'Promoter', bonus: '1%', team: '100', deposit: '5,000' },
                { level: 3, title: 'Leader', bonus: '1.5%', team: '200', deposit: '10,000' },
                { level: 4, title: 'Partner', bonus: '2%', team: '400', deposit: '15,000' },
                { level: 5, title: 'Star', bonus: '3%', team: '800', deposit: '25,000' },
                { level: 6, title: 'Royal Star', bonus: '4%', team: '1,500', deposit: '50,000' },
                { level: 7, title: 'Crown Star', bonus: '5%', team: '2,500', deposit: '100,000' }
            ];
            
            levelsContainer.innerHTML = ranks.map(rank => `
                <div class="leadership-level-compact">
                    <div class="level-number-compact">${rank.level}</div>
                    <div style="font-weight:600; color:white;">${rank.title}</div>
                    <div class="level-commission-compact">${rank.bonus}</div>
                    <div class="level-requirement-compact">${rank.team} members</div>
                    <div class="level-requirement-compact" style="font-size:0.7rem;">${rank.deposit} USDT team</div>
                </div>
            `).join('');
        }

        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => notification.classList.remove('show'), 5000);
        }

        function checkPreloader() {
            window.addEventListener('load', () => {
                setTimeout(() => {
                    if (preloader) {
                        preloader.classList.add('fade-out');
                    }
                }, 500);
            });
        }
    </script>
</body>
</html>
