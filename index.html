<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NexGenFi - Smart Investment Platform</title>
    <meta name="description" content="Earn daily returns with 4% capital return, multi-level referral bonuses, and leadership rewards system">
    <link rel="icon" type="image/x-icon" href="image/favicon.ico">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bignumber.js@9.1.2/bignumber.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>

    <style>
        :root {
            /* Premium Dark Theme - No Green Borders */
            --bg-deep: #050b14;
            --bg-card: rgba(14, 29, 47, 0.6); /* More transparent */
            --bg-card-hover: rgba(19, 38, 60, 0.8);
            
            --primary-accent: #00C853;
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            
            --gradient-main: linear-gradient(135deg, #00C853 0%, #00E676 100%);
            
            /* Clean Glass Borders (White/Transparent, NOT Green) */
            --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            
            --shadow-card: 0 8px 32px 0 rgba(0, 0, 0, 0.4);

            /* Typography */
            --font-body: 'Outfit', sans-serif;
            --font-heading: 'Space Grotesk', sans-serif;

            /* Spacing & Radius */
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            
            --container-width: 1240px;
            --header-height: 80px;
        }

        /* Modern Reset & Base */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            outline: none; 
            -webkit-tap-highlight-color: transparent; 
        }

        html { 
            scroll-behavior: smooth; 
            font-size: 16px; 
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-deep);
            /* Subtle background glow, no harsh lines */
            background-image: radial-gradient(circle at 50% 0%, rgba(0, 200, 83, 0.1), transparent 40%);
            background-attachment: fixed;
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Container */
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px; /* Reduced padding for mobile */
        }

        /* Typography */
        h1, h2, h3, h4 { 
            font-family: var(--font-heading); 
            color: var(--text-main); 
            line-height: 1.2; 
        }

        .gradient-text {
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }

        /* Preloader */
        .preloader {
            position: fixed; inset: 0;
            background: #0A1929;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 9999;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }
        .preloader.fade-out { opacity: 0; visibility: hidden; }

        .loader { display: flex; gap: 6px; margin-bottom: 20px; }
        .green-bar {
            width: 6px; height: 30px;
            background: var(--gradient-main);
            border-radius: 10px;
            animation: pulse-loader 1s ease-in-out infinite;
        }
        .green-bar:nth-child(2) { animation-delay: 0.1s; height: 45px; }
        .green-bar:nth-child(3) { animation-delay: 0.2s; height: 60px; }
        .green-bar:nth-child(4) { animation-delay: 0.3s; height: 45px; }
        .green-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes pulse-loader {
            0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
            50% { transform: scaleY(1); opacity: 1; }
        }

        .preloader-text { 
            font-family: var(--font-heading); font-size: 1.5rem; 
            letter-spacing: 4px; font-weight: 700; color: white; 
        }

        /* Header / Navbar */
        .header {
            position: fixed; top: 0; left: 0; right: 0;
            height: var(--header-height);
            background: rgba(5, 11, 20, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            z-index: 1000;
        }

        .nav { display: flex; justify-content: space-between; align-items: center; height: 100%; }

        .nav__logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .logo { width: 36px; height: 36px; }
        .logo__text { font-size: 1.3rem; font-weight: 700; color: white; font-family: var(--font-heading); }

        .nav__menu { display: flex; align-items: center; gap: 40px; }
        .nav__list { display: flex; list-style: none; gap: 32px; }

        .nav__link {
            color: var(--text-muted); text-decoration: none;
            font-weight: 500; font-size: 0.95rem; transition: 0.3s;
        }
        .nav__link:hover, .nav__link.active { color: white; }

        .nav__toggle { display: none; font-size: 1.5rem; color: white; cursor: pointer; padding: 10px; }

        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 10px;
            padding: 12px 28px; border-radius: 50px;
            font-weight: 600; font-size: 0.95rem;
            cursor: pointer; transition: all 0.3s;
            text-decoration: none; border: none;
            white-space: nowrap;
        }

        .btn--primary {
            background: var(--gradient-main); color: white;
            box-shadow: 0 4px 15px rgba(0, 200, 83, 0.2);
        }
        .btn--primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 200, 83, 0.3); }

        .btn--outline {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        .btn--outline:hover { background: rgba(255, 255, 255, 0.1); }

        .btn-lg { padding: 16px 36px; font-size: 1rem; }
        .compact-btn { padding: 12px 20px; font-size: 0.9rem; height: 48px; min-width: 120px; }

        /* Sections */
        .section { 
            padding-top: 140px; /* Jarak aman dari header */
            padding-bottom: 80px; 
            min-height: 100vh;
            display: flex; flex-direction: column; justify-content: flex-start;
        }
        .section__header { text-align: center; margin-bottom: 50px; }
        .section__title {
            font-size: 2.8rem; margin-bottom: 16px; font-weight: 700; color: white;
        }
        .section__subtitle { color: var(--text-muted); font-size: 1.1rem; }

        /* Dashboard Styles */
        .dashboard-subtitle {
            font-size: 1.3rem; margin-bottom: 20px; color: white;
            text-align: center;
        }

        /* Compact Stats - Mobile Optimized */
        .compact-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Default desktop 3 columns */
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Clean Card Style - No Green Borders */
        .premium-card, .plan-card, .stat-card, .timer-box {
            background: var(--bg-card);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: var(--glass-border); /* Subtle white border */
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            /* NO green borders or ::before pseudo elements */
        }

        .compact-card {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; gap: 10px;
        }

        .compact-card .stat-icon {
            width: 50px; height: 50px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; color: var(--primary-accent);
            margin-bottom: 5px;
        }

        .compact-card .stat-value {
            font-size: 1.4rem; font-weight: 700; color: white;
        }
        
        .compact-card .stat-label { font-size: 0.9rem; color: var(--text-muted); }

        .compact-buttons {
            display: flex; flex-wrap: wrap; gap: 15px;
            justify-content: center; margin-bottom: 40px;
        }

        /* Timer */
        .timer-section { margin-bottom: 30px; }
        .timer-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;
        }
        .timer-box { text-align: center; padding: 20px; }
        .timer-value { font-size: 1.5rem; font-weight: 700; color: #A7FFEB; margin-top: 5px; }

        /* Tables - Mobile Optimized */
        .premium-table-container {
            background: rgba(255, 255, 255, 0.02);
            border-radius: var(--radius-lg);
            padding: 0; /* Remove padding to maximize space */
            margin-top: 20px;
            overflow: hidden; /* Hide overflow from container radius */
            border: var(--glass-border);
        }

        .table-responsive {
            width: 100%;
            overflow-x: auto; /* Enable horizontal scroll */
            -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
            padding-bottom: 10px; /* Space for scrollbar */
        }

        .premium-table {
            width: 100%;
            border-collapse: collapse;
            white-space: nowrap; /* Prevent text wrapping */
        }

        .premium-table th {
            background: rgba(255, 255, 255, 0.05);
            color: white; padding: 18px 15px;
            text-align: left; font-size: 0.85rem; text-transform: uppercase;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .premium-table td {
            padding: 16px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-muted); font-size: 0.95rem;
        }

        .premium-table tr:last-child td { border-bottom: none; }

        /* Hero */
        #home { justify-content: center; padding-top: 150px; }
        .hero__container { 
            display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 40px; align-items: center; 
        }
        .hero__title { font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; font-weight: 800; }
        .hero__description { color: var(--text-muted); font-size: 1.15rem; margin-bottom: 30px; }
        .hero__buttons { display: flex; gap: 15px; }

        /* Investment Plans */
        .investment-plans { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; 
        }
        .plan-card { transition: 0.3s; text-align: center; }
        .plan-card:hover { transform: translateY(-5px); background: rgba(19, 38, 60, 0.8); }
        .plan-badge {
            background: rgba(255, 255, 255, 0.1); padding: 5px 15px;
            border-radius: 20px; font-size: 0.85rem; display: inline-block; margin-bottom: 10px;
        }
        .plan-roi { font-size: 1.5rem; font-weight: 700; color: #A7FFEB; margin-bottom: 15px; }
        .plan-features { list-style: none; text-align: left; padding: 0 10px; margin-bottom: 20px; }
        .plan-features li { 
            padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); 
            display: flex; justify-content: space-between; font-size: 0.9rem;
        }
        .plan-features li:last-child { border-bottom: none; }

        /* Forms */
        .investment-form-container, .referral-link-container { 
            max-width: 600px; margin: 0 auto; text-align: center;
        }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-input {
            width: 100%; padding: 15px; border-radius: 12px;
            background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255,255,255,0.1);
            color: white; font-size: 1rem;
        }
        
        .link-input-group {
            display: flex; gap: 10px; justify-content: center; margin-top: 15px;
        }

        /* Center Confirm Button */
        #confirmInvestment { margin: 25px auto 0; display: flex; min-width: 220px; }

        /* Alerts */
        .alert {
            padding: 15px; border-radius: 12px; display: flex; align-items: center; gap: 15px;
            background: rgba(20, 20, 30, 0.9); border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }
        .alert-warning { color: #ffd700; }

        /* Referral Levels */
        .referral-levels-compact, .leadership-levels-compact { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; margin-top: 30px;
        }
        .referral-level-compact {
            background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px; text-align: center;
        }

        /* Footer */
        .footer { 
            background: #02050a; padding: 60px 0 30px; margin-top: auto; border-top: 1px solid rgba(255,255,255,0.05); text-align: center; 
        }
        .footer__social { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        .social__link {
            width: 40px; height: 40px; background: rgba(255,255,255,0.05);
            display: flex; align-items: center; justify-content: center; border-radius: 50%; color: white; text-decoration: none;
        }

        /* Mobile Responsive Fixes */
        @media (max-width: 768px) {
            .section { padding-top: 100px; padding-bottom: 60px; }
            
            .nav__menu {
                position: fixed; top: 80px; left: -100%; width: 100%; height: calc(100vh - 80px);
                background: #050b14; flex-direction: column; padding: 30px;
                transition: 0.3s; align-items: flex-start;
            }
            .nav__menu.active { left: 0; }
            .nav__list { flex-direction: column; width: 100%; gap: 20px; margin-bottom: 30px; }
            .nav__toggle { display: block; }
            
            .hero__container { grid-template-columns: 1fr; text-align: center; }
            .hero__title { font-size: 2.2rem; }
            .hero__buttons { justify-content: center; flex-direction: column; }
            
            /* Dashboard Mobile Fix - Stack Cards */
            .compact-stats {
                grid-template-columns: 1fr; /* 1 Card per row */
                gap: 15px;
            }
            
            .compact-card {
                padding: 20px;
                flex-direction: row; /* Horizontal layout for mobile stats */
                justify-content: space-between;
                text-align: left;
            }
            .compact-card .stat-icon { margin: 0; }
            .compact-card .stat-info { text-align: right; }
            
            .compact-buttons { flex-direction: column; width: 100%; }
            .compact-btn { width: 100%; }

            /* Table Mobile Fix */
            .premium-table th, .premium-table td { padding: 12px 10px; font-size: 0.85rem; }
            .premium-table-container { margin: 20px -10px; width: calc(100% + 20px); border-radius: 0; border-left: none; border-right: none; }
            
            .section__title { font-size: 2rem; }
            
            .link-input-group { flex-direction: column; }
            .link-input-group .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="loader">
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
            <div class="green-bar"></div>
        </div>
        <div class="preloader-text">NEXGENFI</div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <a href="#" class="nav__logo">
                <img src="image/logo.png" alt="N" class="logo" onerror="this.style.display='none'">
                <div class="logo__text">NEXGENFI</div>
            </a>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a class="nav__link active" data-section="home">Home</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="dashboard">Dashboard</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="invest">Invest</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="referral">Referral</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="leadership">Leadership</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="team">Team Data</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="faq">FAQ</a></li>
                </ul>

                <button class="btn btn--outline btn-sm" id="connectWallet">
                    <i class="fas fa-wallet"></i>
                    Connect
                </button>
            </div>

            <div class="nav__toggle" id="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Home Section -->
        <section class="section" id="home">
            <div class="hero__container container">
                <div class="hero__content">
                    <h1 class="hero__title">
                        Maximize Your Returns with <span class="gradient-text">NexGenFi Protocol</span>
                    </h1>
                    <p class="hero__description">
                        Invest USDT and earn 4% daily capital return plus ROI bonuses. Build your team and unlock 20-level referral commissions.
                    </p>
                    <div class="hero__buttons">
                        <button class="btn btn--primary btn-lg" data-section="invest">
                            Start Investing
                        </button>
                        <button class="btn btn--outline btn-lg" data-section="dashboard">
                            Dashboard
                        </button>
                    </div>
                </div>
                <div class="hero__image">
                    <div class="premium-card">
                        <div class="card__content">
                            <div style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
                                <span>Total Users</span>
                                <span style="font-weight:700; color:white;" id="statTotalUsers">Loading...</span>
                            </div>
                            <div style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
                                <span>Total Investment</span>
                                <span style="font-weight:700; color:white;" id="statTotalInvest">Loading...</span>
                            </div>
                            <div style="display:flex; justify-content:space-between;">
                                <span>Total Paid Out</span>
                                <span style="font-weight:700; color:white;" id="statTotalPaid">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section class="section" id="dashboard" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Your Dashboard</h2>
                </div>

                <div class="alert alert-warning" id="dashboardWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to view your dashboard</span>
                </div>

                <!-- Timer Section -->
                <div class="timer-section" id="timerSection" style="display: none;">
                    <div class="timer-container">
                        <div class="timer-box">
                            <div class="timer-label">Next ROI</div>
                            <div class="timer-value" id="roiTimerDisplay">--:--:--</div>
                        </div>
                        <div class="timer-box">
                            <div class="timer-label">Capital Available</div>
                            <div class="timer-value" id="capitalTimerDisplay">--:--:--</div>
                        </div>
                    </div>
                </div>

                <!-- Investment Income -->
                <div class="dashboard-section" id="investmentIncomeSection" style="display: none;">
                    <h3 class="dashboard-subtitle">Investment Income</h3>
                    <div class="compact-stats">
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-wallet"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="totalDepositDashboard">0 USDT</div>
                                <div class="stat-label">Total Deposit</div>
                            </div>
                        </div>
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-coins"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="capitalEarning">0 USDT</div>
                                <div class="stat-label">Capital Earning</div>
                            </div>
                        </div>
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="roiEarning">0 USDT</div>
                                <div class="stat-label">ROI Earning</div>
                            </div>
                        </div>
                    </div>

                    <div class="compact-buttons">
                        <button class="btn btn--primary compact-btn" id="claimROI">Claim ROI</button>
                        <button class="btn btn--outline compact-btn" id="claimCapital">Claim Capital</button>
                        <button class="btn btn--primary compact-btn" id="compoundInvestment">Compound</button>
                    </div>
                </div>

                <!-- Network Income -->
                <div class="dashboard-section" id="networkIncomeSection" style="display: none;">
                    <h3 class="dashboard-subtitle">Network Income</h3>
                    <div class="compact-stats">
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-gift"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="referralEarning">0 USDT</div>
                                <div class="stat-label">Referral Earning</div>
                            </div>
                        </div>
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-user-plus"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="onboardingEarning">0 USDT</div>
                                <div class="stat-label">Onboarding</div>
                            </div>
                        </div>
                        <div class="compact-card premium-card">
                            <div class="stat-icon"><i class="fas fa-crown"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="leadershipEarning">0 USDT</div>
                                <div class="stat-label">Leadership</div>
                            </div>
                        </div>
                    </div>

                    <div class="compact-buttons">
                        <button class="btn btn--primary compact-btn" id="claimNetwork">Claim Network</button>
                        <button class="btn btn--outline compact-btn" id="compoundNetwork">Compound Network</button>
                    </div>
                </div>

                <!-- My Positions -->
                <div class="premium-card" id="myPositionsSection" style="display: none; padding: 20px;">
                    <h3 style="text-align:center; margin-bottom:15px;">My Positions</h3>
                    <div class="premium-table-container">
                        <div class="table-responsive">
                            <table class="premium-table">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Amount</th>
                                        <th>Plan</th>
                                        <th>End Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="positionsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="noInvestmentsMessage" style="display: none; text-align:center; margin-top:40px;">
                    <h3 style="margin-bottom:20px;">No Active Investments</h3>
                    <button class="btn btn--primary" data-section="invest">Start Investing</button>
                </div>
            </div>
        </section>

        <!-- Invest Section -->
        <section class="section" id="invest" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Make a Deposit</h2>
                </div>

                <div class="alert alert-warning" id="investWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet first</span>
                </div>

                <div class="investment-plans" id="investmentPlans">
                    <!-- Beginner -->
                    <div class="plan-card">
                        <div class="plan-badge">Beginner</div>
                        <div class="plan-roi">4% + 0.5%</div>
                        <div style="margin-bottom:15px; color:var(--text-muted);">10 - 499 USDT</div>
                        <ul class="plan-features">
                            <li><span>Cycle</span> <span>25 Days</span></li>
                            <li><span>Withdraw</span> <span>Every 24h</span></li>
                        </ul>
                        <button class="btn btn--outline" style="margin-top:20px; width:100%;" data-plan="beginner">Select Plan</button>
                    </div>
                     <!-- Basic -->
                     <div class="plan-card">
                        <div class="plan-badge">Basic</div>
                        <div class="plan-roi">4% + 0.75%</div>
                        <div style="margin-bottom:15px; color:var(--text-muted);">500 - 999 USDT</div>
                        <ul class="plan-features">
                            <li><span>Cycle</span> <span>25 Days</span></li>
                            <li><span>Withdraw</span> <span>Every 12h</span></li>
                        </ul>
                        <button class="btn btn--outline" style="margin-top:20px; width:100%;" data-plan="basic">Select Plan</button>
                    </div>
                     <!-- Standard -->
                     <div class="plan-card" style="border: 1px solid var(--primary-accent);">
                        <div class="plan-badge" style="background:var(--primary-accent); color:white;">Standard</div>
                        <div class="plan-roi">4% + 1%</div>
                        <div style="margin-bottom:15px; color:var(--text-muted);">1,000 - 2,499 USDT</div>
                        <ul class="plan-features">
                            <li><span>Cycle</span> <span>25 Days</span></li>
                            <li><span>Withdraw</span> <span>Every 8h</span></li>
                        </ul>
                        <button class="btn btn--primary" style="margin-top:20px; width:100%;" data-plan="standard">Select Plan</button>
                    </div>
                     <!-- High -->
                     <div class="plan-card">
                        <div class="plan-badge">High</div>
                        <div class="plan-roi">4% + 1.25%</div>
                        <div style="margin-bottom:15px; color:var(--text-muted);">2,500 - 4,999 USDT</div>
                        <ul class="plan-features">
                            <li><span>Cycle</span> <span>25 Days</span></li>
                            <li><span>Withdraw</span> <span>Every 4h</span></li>
                        </ul>
                        <button class="btn btn--outline" style="margin-top:20px; width:100%;" data-plan="high">Select Plan</button>
                    </div>
                     <!-- Premium -->
                     <div class="plan-card">
                        <div class="plan-badge">Premium</div>
                        <div class="plan-roi">4% + 1.5%</div>
                        <div style="margin-bottom:15px; color:var(--text-muted);">5,000+ USDT</div>
                        <ul class="plan-features">
                            <li><span>Cycle</span> <span>25 Days</span></li>
                            <li><span>Withdraw</span> <span>Every 2h</span></li>
                        </ul>
                        <button class="btn btn--outline" style="margin-top:20px; width:100%;" data-plan="premium">Select Plan</button>
                    </div>
                </div>

                <!-- Invest Form -->
                <div class="investment-form-container premium-card" id="investmentForm" style="display: none;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                        <h3 id="selectedPlanTitle">Deposit</h3>
                        <button class="btn btn--outline btn-sm" id="backToPlans">Back</button>
                    </div>

                    <div class="form-group">
                        <label>Deposit Amount (USDT)</label>
                        <input type="number" id="investmentAmount" class="form-input" placeholder="0.00">
                        <small id="amountRange" style="display:block; margin-top:5px; color:var(--text-muted);"></small>
                    </div>
                    
                    <div class="form-group">
                        <label>Upline Address (Optional)</label>
                        <input type="text" id="referrerAddress" class="form-input" placeholder="0x...">
                    </div>

                    <button class="btn btn--primary btn-lg" id="confirmInvestment">Confirm Deposit</button>
                </div>
            </div>
        </section>

        <!-- Referral Section -->
        <section class="section" id="referral" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Referral Program</h2>
                </div>

                <div class="alert alert-warning" id="referralWalletAlert">
                    <span>Connect wallet to view referral data</span>
                </div>

                <div class="compact-stats" id="referralStats" style="display: none;">
                    <div class="compact-card premium-card">
                        <div class="stat-value" id="totalDownlines">0</div>
                        <div class="stat-label">Total Downlines</div>
                    </div>
                    <div class="compact-card premium-card">
                        <div class="stat-value" id="qualifiedLevels">0</div>
                        <div class="stat-label">Qualified Levels</div>
                    </div>
                </div>

                <div class="referral-link-container premium-card" id="referralLinkSection" style="display: none;">
                    <h3>Your Referral Link</h3>
                    <p style="margin:10px 0; color:var(--text-muted);">Share this link to grow your network</p>
                    <div class="link-input-group">
                        <input type="text" id="referralLink" class="form-input" readonly>
                        <button class="btn btn--primary" id="copyLink">Copy</button>
                    </div>
                </div>

                <div class="referral-levels-compact" id="referralLevelsCompact"></div>
            </div>
        </section>

        <!-- Leadership -->
        <section class="section" id="leadership" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Leadership</h2>
                </div>
                
                <div class="alert alert-warning" id="leadershipWalletAlert">Connect wallet to view leadership data</div>

                <div class="compact-stats" id="leadershipStats" style="display: none;">
                    <div class="compact-card premium-card">
                        <div class="stat-value" id="currentRank">-</div>
                        <div class="stat-label">Rank</div>
                    </div>
                    <div class="compact-card premium-card">
                        <div class="stat-value" id="teamDeposits">0</div>
                        <div class="stat-label">Team Vol</div>
                    </div>
                </div>

                <div class="leadership-levels-compact" id="leadershipLevelsCompact"></div>
            </div>
        </section>

        <!-- Team Data -->
        <section class="section" id="team" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">Team Data</h2>
                </div>

                <div class="alert alert-warning" id="teamWalletAlert">Connect wallet to view team</div>

                <div class="premium-card" id="teamTableContainer" style="display: none; padding:15px;">
                    <div style="margin-bottom:15px; text-align:right;">
                        <select id="levelFilter" class="form-input" style="width:auto; display:inline-block;">
                            <option value="">All Levels</option>
                            <option value="1">Level 1</option>
                            <option value="2">Level 2</option>
                            <option value="3">Level 3</option>
                            <!-- JS will fill -->
                        </select>
                    </div>
                    
                    <div class="premium-table-container">
                        <div class="table-responsive">
                            <table class="premium-table">
                                <thead>
                                    <tr>
                                        <th>Address</th>
                                        <th>Lvl</th>
                                        <th>Deposit</th>
                                        <th>Team</th>
                                        <th>Vol</th>
                                    </tr>
                                </thead>
                                <tbody id="teamTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="section" id="faq" style="display: none;">
            <div class="container">
                <div class="section__header">
                    <h2 class="section__title">FAQ</h2>
                </div>
                <div class="faq-container">
                    <div class="premium-card" style="margin-bottom:15px;">
                        <h4>Minimum Deposit?</h4>
                        <p style="color:var(--text-muted); margin-top:5px;">10 USDT. No max limit.</p>
                    </div>
                    <div class="premium-card" style="margin-bottom:15px;">
                        <h4>How are returns calculated?</h4>
                        <p style="color:var(--text-muted); margin-top:5px;">4% daily capital return + ROI bonus (0.5% - 1.5%).</p>
                    </div>
                    <div class="premium-card" style="margin-bottom:15px;">
                        <h4>Admin Fee?</h4>
                        <p style="color:var(--text-muted); margin-top:5px;">10% deduction from deposits sent to admin wallet.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <h3>NexGenFi</h3>
            <div class="footer__social">
                <a href="#" class="social__link"><i class="fab fa-telegram-plane"></i></a>
                <a href="#" class="social__link"><i class="fab fa-twitter"></i></a>
            </div>
            <p style="color:var(--text-muted); font-size:0.8rem; margin-top:20px;">&copy; NexGenFi All Rights Reserved</p>
        </div>
    </footer>

    <div class="notification" id="notification" style="position:fixed; top:20px; right:20px; padding:15px; background:#333; color:white; border-radius:5px; display:none; z-index:9999;"></div>

    <script>
        const CONTRACT_ADDRESS = '0x3eCCC758B9a82D2eB543Dc13433B9beaA46baBF9';
        const USDT_ADDRESS = '0x55d398326f99059fF775485246999027B3197955';
        const READ_ONLY_RPC = 'https://bsc-dataseed1.binance.org/';

        const USDT_ABI = [{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"type":"function"}];
        // Minimal Contract ABI for functionality
        const CONTRACT_ABI = [{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"}],"name":"claimCapitalReturn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"}],"name":"claimRoiBonus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"compoundRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"investmentIndex","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"compoundRoiBonus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"upline","type":"address"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getGlobalStats","outputs":[{"internalType":"uint256","name":"contractBalance","type":"uint256"},{"internalType":"uint256","name":"investorsCount","type":"uint256"},{"internalType":"uint256","name":"totalInvestment","type":"uint256"},{"internalType":"uint256","name":"totalPayout","type":"uint256"},{"internalType":"uint256","name":"totalPositionsCreated","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getInvestmentDetails","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"availableRoi","type":"uint256"},{"internalType":"uint256","name":"availableCapital","type":"uint256"},{"internalType":"uint256","name":"nextWithdrawTime","type":"uint256"},{"internalType":"uint256","name":"planIndex","type":"uint256"},{"internalType":"bool","name":"isActive","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getDownlines","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserInfo","outputs":[{"internalType":"address","name":"upline","type":"address"},{"internalType":"uint256","name":"totalDeposits","type":"uint256"},{"internalType":"uint256","name":"userTotalWithdrawn","type":"uint256"},{"internalType":"uint256","name":"positionsCount","type":"uint256"},{"internalType":"bool","name":"isPromoter","type":"bool"},{"internalType":"uint256","name":"teamCount","type":"uint256"},{"internalType":"uint256","name":"teamDeposits","type":"uint256"},{"internalType":"string","name":"rank","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserReturns","outputs":[{"internalType":"uint256","name":"totalCapitalReturn","type":"uint256"},{"internalType":"uint256","name":"totalRoiBonus","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserRewards","outputs":[{"internalType":"uint256","name":"totalReferralBonus","type":"uint256"},{"internalType":"uint256","name":"totalOnboardingBonus","type":"uint256"},{"internalType":"uint256","name":"leadershipBonus","type":"uint256"},{"internalType":"uint256","name":"availableRewards","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"isUserActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}];

        let web3, contract, usdtContract, userAccount;
        let userInvestments = [], userTeamData = [], selectedPlan = null;
        let roiTimerInterval, capitalTimerInterval;

        const PLANS = {
            beginner: { name: 'Beginner', min: 10, max: 499 },
            basic: { name: 'Basic', min: 500, max: 999 },
            standard: { name: 'Standard', min: 1000, max: 2499 },
            high: { name: 'High', min: 2500, max: 4999 },
            premium: { name: 'Premium', min: 5000, max: null }
        };

        window.onload = function() {
            setTimeout(() => document.querySelector('.preloader').classList.add('fade-out'), 500);
            init();
        };

        async function init() {
            web3 = new Web3(new Web3.providers.HttpProvider(READ_ONLY_RPC));
            contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
            
            // Initial load
            loadGlobalStats();
            setupEvents();
            
            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.get('ref')) document.getElementById('referrerAddress').value = urlParams.get('ref');
            
            generateReferralLevels();
            generateLeadershipLevels();
        }

        function setupEvents() {
            document.getElementById('nav-toggle').onclick = () => document.getElementById('nav-menu').classList.toggle('active');
            
            document.querySelectorAll('[data-section]').forEach(el => {
                el.onclick = (e) => {
                    const id = e.target.getAttribute('data-section');
                    document.querySelectorAll('section').forEach(s => s.style.display = 'none');
                    document.getElementById(id).style.display = 'flex'; // Changed to flex for proper centering
                    if(id === 'invest') document.getElementById(id).style.display = 'block'; // Block for invest
                    if(id === 'dashboard' && userAccount) loadUserData();
                    if(id === 'team' && userAccount) loadTeamData();
                    document.getElementById('nav-menu').classList.remove('active');
                    window.scrollTo(0,0);
                }
            });

            document.getElementById('connectWallet').onclick = connectWallet;
            
            document.querySelectorAll('[data-plan]').forEach(btn => {
                btn.onclick = function() {
                    selectedPlan = this.getAttribute('data-plan');
                    document.getElementById('investmentPlans').style.display = 'none';
                    document.getElementById('investmentForm').style.display = 'block';
                    document.getElementById('selectedPlanTitle').textContent = PLANS[selectedPlan].name + ' Plan';
                    validateAmount();
                }
            });

            document.getElementById('backToPlans').onclick = () => {
                document.getElementById('investmentPlans').style.display = 'grid';
                document.getElementById('investmentForm').style.display = 'none';
            };

            document.getElementById('investmentAmount').oninput = validateAmount;
            document.getElementById('confirmInvestment').onclick = confirmInvestment;
            document.getElementById('claimROI').onclick = claimROI;
            document.getElementById('claimCapital').onclick = claimCapital;
            document.getElementById('compoundInvestment').onclick = compoundROI;
            document.getElementById('claimNetwork').onclick = claimNetwork;
            document.getElementById('compoundNetwork').onclick = compoundNetwork;
            document.getElementById('copyLink').onclick = copyLink;
            document.getElementById('levelFilter').onchange = displayTeamData;
        }

        async function connectWallet() {
            if(window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    userAccount = accounts[0];
                    web3 = new Web3(window.ethereum);
                    contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                    usdtContract = new web3.eth.Contract(USDT_ABI, USDT_ADDRESS);
                    
                    document.getElementById('connectWallet').innerText = userAccount.substr(0,6)+'...'+userAccount.substr(-4);
                    
                    document.querySelectorAll('.alert-warning').forEach(el => el.style.display = 'none');
                    document.querySelectorAll('.dashboard-section, #referralStats, #referralLinkSection, #leadershipStats, #teamTableContainer').forEach(el => el.style.display = 'block');
                    document.getElementById('myPositionsSection').style.display = 'block';
                    document.getElementById('referralStats').style.display = 'grid';
                    document.getElementById('leadershipStats').style.display = 'grid';
                    
                    loadUserData();
                    showNotification('Wallet Connected', 'success');
                } catch(e) { console.error(e); }
            } else {
                alert('Install Metamask');
            }
        }

        async function loadGlobalStats() {
            try {
                const stats = await contract.methods.getGlobalStats().call();
                document.getElementById('statTotalUsers').textContent = stats.investorsCount;
                document.getElementById('statTotalInvest').textContent = fmt(stats.totalInvestment) + ' USDT';
                document.getElementById('statTotalPaid').textContent = fmt(stats.totalPayout) + ' USDT';
            } catch(e) {}
        }

        async function loadUserData() {
            if(!userAccount) return;
            const info = await contract.methods.getUserInfo(userAccount).call();
            const returns = await contract.methods.getUserReturns(userAccount).call();
            const rewards = await contract.methods.getUserRewards(userAccount).call();

            document.getElementById('totalDepositDashboard').innerText = fmt(info.totalDeposits) + ' USDT';
            document.getElementById('capitalEarning').innerText = fmt(returns.totalCapitalReturn) + ' USDT';
            document.getElementById('roiEarning').innerText = fmt(returns.totalRoiBonus) + ' USDT';
            
            document.getElementById('referralEarning').innerText = fmt(rewards.totalReferralBonus) + ' USDT';
            document.getElementById('onboardingEarning').innerText = fmt(rewards.totalOnboardingBonus) + ' USDT';
            document.getElementById('leadershipEarning').innerText = fmt(rewards.leadershipBonus) + ' USDT';

            document.getElementById('totalDownlines').innerText = info.teamCount;
            document.getElementById('currentRank').innerText = info.rank || '-';
            document.getElementById('teamDeposits').innerText = fmt(info.teamDeposits) + ' USDT';
            
            document.getElementById('referralLink').value = window.location.origin + '?ref=' + userAccount;

            // Load Investments
            const count = parseInt(info.positionsCount);
            userInvestments = [];
            const tbody = document.getElementById('positionsTableBody');
            tbody.innerHTML = '';
            
            let nextROI = Infinity, nextCapital = Infinity;
            const now = Math.floor(Date.now()/1000);

            for(let i=0; i<count; i++) {
                try {
                    const inv = await contract.methods.getInvestmentDetails(userAccount, i).call();
                    userInvestments.push({...inv, index: i});
                    
                    if(inv.isActive) {
                        if(parseInt(inv.nextWithdrawTime) < nextROI) nextROI = parseInt(inv.nextWithdrawTime);
                        if(parseInt(inv.endTime) < nextCapital) nextCapital = parseInt(inv.endTime);
                    }

                    tbody.innerHTML += `
                        <tr>
                            <td>${i+1}</td>
                            <td>${fmt(inv.amount)}</td>
                            <td>${getPlanName(inv.planIndex)}</td>
                            <td>${new Date(inv.endTime*1000).toLocaleDateString()}</td>
                            <td style="color:${inv.isActive?'#4ade80':'#fbbf24'}">${inv.isActive?'Active':'Done'}</td>
                        </tr>
                    `;
                } catch(e) {}
            }
            
            if(count === 0) document.getElementById('noInvestmentsMessage').style.display = 'block';
            else document.getElementById('noInvestmentsMessage').style.display = 'none';

            // Timers
            if(roiTimerInterval) clearInterval(roiTimerInterval);
            if(capitalTimerInterval) clearInterval(capitalTimerInterval);
            
            if(nextROI !== Infinity && nextROI > now) {
                document.getElementById('timerSection').style.display = 'block';
                startTimer('roiTimerDisplay', nextROI);
            } else if (nextROI !== Infinity) {
                document.getElementById('roiTimerDisplay').innerText = "Ready";
                document.getElementById('timerSection').style.display = 'block';
            }

            if(nextCapital !== Infinity && nextCapital > now) {
                startTimer('capitalTimerDisplay', nextCapital);
            } else if (nextCapital !== Infinity) {
                document.getElementById('capitalTimerDisplay').innerText = "Ready";
            }
        }

        async function loadTeamData() {
            const downlines = await contract.methods.getDownlines(userAccount).call();
            userTeamData = [];
            
            for(let i=0; i<downlines.length; i++) {
                try {
                    const info = await contract.methods.getUserInfo(downlines[i]).call();
                    const active = await contract.methods.isUserActive(downlines[i]).call();
                    userTeamData.push({
                        address: downlines[i],
                        level: i+1,
                        deposit: info.totalDeposits,
                        team: info.teamCount,
                        vol: info.teamDeposits
                    });
                } catch(e) {}
            }
            displayTeamData();
        }

        function displayTeamData() {
            const tbody = document.getElementById('teamTableBody');
            tbody.innerHTML = '';
            const filter = document.getElementById('levelFilter').value;
            
            const data = filter ? userTeamData.filter(u => u.level == filter) : userTeamData;
            
            if(data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;">No data</td></tr>';
                return;
            }

            data.forEach(u => {
                tbody.innerHTML += `
                    <tr>
                        <td>${u.address.substr(0,4)}..${u.address.substr(-4)}</td>
                        <td>${u.level}</td>
                        <td>${fmt(u.deposit)}</td>
                        <td>${u.team}</td>
                        <td>${fmt(u.vol)}</td>
                    </tr>
                `;
            });
        }

        // Actions
        async function confirmInvestment() {
            const amt = document.getElementById('investmentAmount').value;
            if(!amt || !selectedPlan) return;
            
            const btn = document.getElementById('confirmInvestment');
            btn.innerText = 'Processing...'; btn.disabled = true;
            
            try {
                const wei = web3.utils.toWei(amt, 'ether');
                const upline = document.getElementById('referrerAddress').value || '0x0000000000000000000000000000000000000000';
                
                const allow = await usdtContract.methods.allowance(userAccount, CONTRACT_ADDRESS).call();
                if(new BigNumber(allow).lt(wei)) {
                    await usdtContract.methods.approve(CONTRACT_ADDRESS, "115792089237316195423570985008687907853269984665640564039457584007913129639935").send({from: userAccount});
                }
                
                await contract.methods.deposit(wei, upline).send({from: userAccount});
                showNotification('Deposit Successful', 'success');
                loadUserData();
            } catch(e) {
                showNotification('Error: ' + e.message, 'error');
            }
            btn.innerText = 'Confirm Deposit'; btn.disabled = false;
        }

        async function claimROI() { actionContract('claimRoiBonus', [0], 'ROI Claimed'); } // Simplified logic, usually iterates
        async function claimCapital() { actionContract('claimCapitalReturn', [0], 'Capital Claimed'); }
        async function claimNetwork() { actionContract('claimRewards', [], 'Rewards Claimed'); }
        
        async function actionContract(method, args, successMsg) {
            try {
                // For simplified version, just calling method. In real app, loop active investments for ROI
                if(method === 'claimRoiBonus') {
                    // Quick hack: find first active
                    for(let inv of userInvestments) {
                        if(inv.isActive && parseFloat(inv.availableRoi) > 0) {
                            await contract.methods.claimRoiBonus(inv.index).send({from:userAccount});
                        }
                    }
                } else {
                    await contract.methods[method](...args).send({from: userAccount});
                }
                showNotification(successMsg, 'success');
                loadUserData();
            } catch(e) { console.log(e); }
        }

        // Utils
        function fmt(wei) { return parseFloat(web3.utils.fromWei(wei, 'ether')).toFixed(2); }
        function getPlanName(idx) { return ['Beginner','Basic','Standard','High','Premium'][idx] || 'Unk'; }
        
        function validateAmount() {
            const val = parseFloat(document.getElementById('investmentAmount').value);
            const p = PLANS[selectedPlan];
            const txt = document.getElementById('amountRange');
            if(val < p.min || (p.max && val > p.max)) {
                txt.style.color = 'red'; txt.innerText = `Range: ${p.min} - ${p.max||'Unl'}`;
            } else {
                txt.style.color = '#94a3b8'; txt.innerText = `Range: ${p.min} - ${p.max||'Unl'}`;
            }
        }
        
        function copyLink() {
            const copyText = document.getElementById("referralLink");
            copyText.select();
            document.execCommand("copy");
            showNotification('Link Copied', 'success');
        }

        function showNotification(msg, type) {
            const n = document.getElementById('notification');
            n.innerText = msg; n.style.display = 'block'; n.style.background = type=='success'?'#00C853':'#f44336';
            setTimeout(() => n.style.display = 'none', 3000);
        }

        function startTimer(id, end) {
            const el = document.getElementById(id);
            const update = () => {
                const now = Math.floor(Date.now()/1000);
                const diff = end - now;
                if(diff <= 0) { el.innerText = "Ready"; return; }
                const h = Math.floor(diff/3600).toString().padStart(2,'0');
                const m = Math.floor((diff%3600)/60).toString().padStart(2,'0');
                const s = (diff%60).toString().padStart(2,'0');
                el.innerText = `${h}:${m}:${s}`;
            };
            update();
            setInterval(update, 1000);
        }

        function generateReferralLevels() {
            const div = document.getElementById('referralLevelsCompact');
            for(let i=1; i<=20; i++) {
                let pct = i<=1 ? '1.5%' : (i<=2?'1.25%':(i<=10?'1%':(i<=15?'0.5%':'0.25%')));
                div.innerHTML += `<div class="referral-level-compact">
                    <div style="font-weight:bold; color:var(--primary-accent);">${i}</div>
                    <div style="font-size:1.2rem; font-weight:bold;">${pct}</div>
                    <div style="font-size:0.8rem; color:#888;">Level</div>
                </div>`;
            }
        }
        function generateLeadershipLevels() {
            const div = document.getElementById('leadershipLevelsCompact');
            const ranks = ['Inviter','Promoter','Leader','Partner','Star','Royal','Crown'];
            ranks.forEach((r, i) => {
                div.innerHTML += `<div class="referral-level-compact">
                    <div style="font-weight:bold; color:var(--primary-accent);">${r}</div>
                    <div style="font-size:1.2rem; font-weight:bold;">${0.5 + (i*0.5)}%</div>
                    <div style="font-size:0.8rem; color:#888;">Bonus</div>
                </div>`;
            });
        }
        
        // Placeholder stubs for compound (same logic as claim essentially for this demo)
        async function compoundROI() { actionContract('compoundRoiBonus', [0, 0], 'Compounded'); } // Stub
        async function compoundNetwork() { actionContract('compoundRewards', [0], 'Compounded'); } // Stub
    </script>
</body>
</html>
